{"version":3,"sources":["../node_modules/peerjs/dist sync","context/UserContext.js","pages/calls/Calls.js","pages/calls/DailCall.js","pages/calls/ReceiveCall.js","pages/contacts/Contacts.js","pages/messages/Messages.js","context/LayoutContext.js","components/header/styles.js","components/header/Header.js","components/sidebar/styles.js","components/sidebar/SidebarLink.js","components/sidebar/Sidebar.js","components/layout/CallModal.js","components/layout/styles.js","components/layout/Layout.js","components/Login.js","components/Signup.js","components/App.js","serviceWorker.js","themes/default.js","themes/index.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","UserStateContext","React","createContext","UserDispatchContext","userReducer","state","action","type","isAuthenticated","UserProvider","children","useReducer","localStorage","getItem","dispatch","Provider","value","useUserDispatch","context","useContext","undefined","Calls","useStyles","makeStyles","theme","appBar","top","bottom","grow","float","position","right","controlBtn","margin","callEndBtn","backgroundColor","video","height","window","innerHeight","width","innerWidth","videoMobile","DailCall","videoGrid","params","useParams","history","useHistory","callId","classes","useState","stream","setStream","audio","setAudio","setVideo","userId","user","JSON","parse","peer","Peer","_id","port","secure","host","isMobile","navigator","userAgent","match","addVideoStream","srcObject","addEventListener","play","append","useEffect","from","document","getElementById","fetch","method","headers","Accept","then","Response","json","response","console","log","myVideo","createElement","setAttribute","muted","mediaDevices","getUserMedia","on","call","answer","userStream","myVide","loadMedia","className","container","AppBar","color","Toolbar","IconButton","onClick","val","getVideoTracks","enabled","edge","getAudioTracks","getTracks","forEach","track","stop","push","src","ReceiveCall","setTimeout","destinationStream","root","flexGrow","maxWidth","demo","palette","background","paper","title","spacing","backdrop","zIndex","drawer","Contacts","dense","data","setData","loading","setLoading","users","getContacts","List","length","map","firstName","lastName","email","ListItem","key","ListItemAvatar","Avatar","Message","ListItemText","primary","secondary","ListItemSecondaryAction","aria-label","Call","VideoCall","Backdrop","open","CircularProgress","Messages","LayoutStateContext","LayoutDispatchContext","layoutReducer","isSidebarOpened","LayoutProvider","useLayoutState","useLayoutDispatch","toggleSidebar","menuButton","marginRight","logotype","marginLeft","fontWeight","fontSize","whiteSpace","breakpoints","down","display","transition","transitions","create","easing","sharp","duration","leavingScreen","paddingLeft","paddingRight","padding","Header","props","layoutState","layoutDispatch","anchorEl","setAnchorEl","Boolean","handleClose","toolbar","variant","classNames","headerMenuButton","headerMenuButtonCollapse","ArrowBack","headerIcon","headerIconCollapse","Typography","noWrap","aria-controls","aria-haspopup","event","currentTarget","Menu","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","onClose","MenuItem","removeItem","signOut","hide","flexShrink","drawerOpen","enteringScreen","drawerClose","overflowX","mixins","content","mobileBackButton","marginTop","only","up","SidebarLink","link","icon","label","location","nested","isOpen","setIsOpen","isLinkActive","pathname","indexOf","classnames","linkText","sectionTitle","linkTextHidden","Divider","divider","button","component","Link","preventDefault","to","disableRipple","ListItemIcon","linkIcon","linkIconActive","Inbox","linkTextActive","Collapse","in","timeout","unmountOnExit","nestedList","disablePadding","childrenLink","linkRoot","linkActive","linkNested","structure","withRouter","useTheme","isPermanent","setPermanent","handleWindowWidthChange","removeEventListener","Drawer","sidebarList","isSmallScreen","values","md","rand","Math","round","random","getModalStyle","left","transform","boxShadow","shadows","callEnd","callAnswer","callImg","justifyContent","textAlign","borderRadius","callText","callName","CallModal","toggle","playing","modalStyle","setOpen","setUser","status","body","stringify","getUserById","style","slice","toUpperCase","Modal","aria-labelledby","aria-describedby","contentShift","fakeToolbar","url","Audio","setPlaying","loop","pause","useAudio","socket","io","setCallId","toId","path","Copyright","align","href","Date","getFullYear","flexDirection","alignItems","avatar","main","form","submit","SignIn","userDispatch","isLoading","setIsLoading","error","setError","password","setValues","handleInputChange","target","name","Container","CssBaseline","noValidate","TextField","required","fullWidth","onChange","autoComplete","autoFocus","FormControlLabel","control","Checkbox","Button","login","setItem","loginUser","Grid","item","xs","Box","mt","SignUp","sm","alert","justify","App","useUserState","exact","render","PrivateRoute","Layout","PublicRoute","Login","rest","hostname","light","tinycolor","lighten","toHexString","dark","darken","contrastText","warning","success","info","text","hint","default","customShadows","widget","widgetDark","widgetWide","overrides","MuiBackdrop","MuiMenu","MuiSelect","MuiListItem","MuiTouchRipple","child","MuiTableRow","MuiTableCell","borderBottom","head","createMuiTheme","defaultTheme","typography","h1","h2","h3","h4","h5","h6","ReactDOM","ThemeProvider","Themes","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.d502ff21.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 144;","import React from \"react\";\r\n\r\nvar UserStateContext = React.createContext();\r\nvar UserDispatchContext = React.createContext();\r\n\r\nfunction userReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"LOGIN_SUCCESS\":\r\n      return { ...state, isAuthenticated: true };\r\n    case \"SIGN_OUT_SUCCESS\":\r\n      return { ...state, isAuthenticated: false };\r\n    default: {\r\n      throw new Error(`Unhandled action type: ${action.type}`);\r\n    }\r\n  }\r\n}\r\n\r\nfunction UserProvider({ children }) {\r\n  var [state, dispatch] = React.useReducer(userReducer, {\r\n    isAuthenticated: !!localStorage.getItem(\"user\"),\r\n  });\r\n\r\n  return (\r\n    <UserStateContext.Provider value={state}>\r\n      <UserDispatchContext.Provider value={dispatch}>\r\n        {children}\r\n      </UserDispatchContext.Provider>\r\n    </UserStateContext.Provider>\r\n  );\r\n}\r\n\r\nfunction useUserState() {\r\n  var context = React.useContext(UserStateContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useUserState must be used within a UserProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nfunction useUserDispatch() {\r\n  var context = React.useContext(UserDispatchContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useUserDispatch must be used within a UserProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nfunction loginUser(dispatch, login, password, history, setIsLoading, setError) {\r\n  setError(false);\r\n  setIsLoading(true);\r\n\r\n  if (!!login && !!password) {\r\n    fetch(\"https://teachit-api.herokuapp.com/teachit/api/v1/user/query\", {\r\n      method: \"post\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ email: login }),\r\n    })\r\n      .then((Response) => Response.json())\r\n      .then((response) => {\r\n        if (response) {\r\n          localStorage.setItem(\"user\", JSON.stringify(response[0]));\r\n          setError(null);\r\n          setIsLoading(false);\r\n          dispatch({ type: \"LOGIN_SUCCESS\" });\r\n\r\n          history.push(\"/app/calls\");\r\n        } else {\r\n          console.log(\"unable to inser\");\r\n        }\r\n      });\r\n  } else {\r\n    dispatch({ type: \"LOGIN_FAILURE\" });\r\n    setError(true);\r\n    setIsLoading(false);\r\n  }\r\n}\r\n\r\nfunction createUser(dispatch, data, history) {\r\n  fetch(\"https://teachit-api.herokuapp.com/teachit/api/v1/user\", {\r\n    method: \"post\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(data),\r\n  })\r\n    .then((Response) => Response.json())\r\n    .then((response) => {\r\n      if (response.user) {\r\n        localStorage.setItem(\"user\", JSON.stringify(response.user));\r\n        dispatch({ type: \"LOGIN_SUCCESS\" });\r\n        history.push(\"/app/calls\");\r\n      } else {\r\n        console.log(\"unable to inser\");\r\n      }\r\n    });\r\n}\r\n\r\nfunction getContacts(setData, setLoading) {\r\n  setLoading(true);\r\n  fetch(\"https://teachit-api.herokuapp.com/teachit/api/v1/user\", {\r\n    method: \"get\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  })\r\n    .then((Response) => Response.json())\r\n    .then((response) => {\r\n      if (response) {\r\n        setData(response.users);\r\n        setLoading(false);\r\n      } else {\r\n        console.log(\"unable to inser\");\r\n        setLoading(false);\r\n      }\r\n    });\r\n}\r\n\r\nfunction getUserById(id, setUser) {\r\n  fetch(\"https://teachit-api.herokuapp.com/teachit/api/v1/user/query\", {\r\n    method: \"post\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ _id: id }),\r\n  })\r\n    .then((Response) => Response.json())\r\n    .then((response) => {\r\n      if (response) {\r\n        setUser(response[0]);\r\n      } else {\r\n        console.log(\"unable to inser\");\r\n      }\r\n    });\r\n}\r\n\r\nfunction signOut(dispatch, history) {\r\n  localStorage.removeItem(\"user\");\r\n  dispatch({ type: \"SIGN_OUT_SUCCESS\" });\r\n  history.push(\"/login\");\r\n}\r\n\r\nexport {\r\n  UserProvider,\r\n  useUserState,\r\n  useUserDispatch,\r\n  createUser,\r\n  loginUser,\r\n  getContacts,\r\n  signOut,\r\n  getUserById,\r\n};\r\n","import React from \"react\";\r\n\r\nexport default function Calls() {\r\n  return (\r\n    <div>\r\n      <div id=\"video-grid\"></div>\r\n    </div>\r\n  );\r\n}\r\n","import { AppBar, IconButton, makeStyles, Toolbar } from \"@material-ui/core\";\r\nimport CallEndIcon from \"@material-ui/icons/CallEnd\";\r\nimport MicIcon from \"@material-ui/icons/Mic\";\r\nimport MicOffIcon from \"@material-ui/icons/MicOff\";\r\nimport VideocamIcon from \"@material-ui/icons/Videocam\";\r\nimport VideocamOffIcon from \"@material-ui/icons/VideocamOff\";\r\nimport Peer from \"peerjs\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport \"./styles.scss\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    top: \"auto\",\r\n    bottom: 0,\r\n  },\r\n  grow: {\r\n    float: \"right\",\r\n    position: \"absolute\",\r\n    right: \"30px\",\r\n  },\r\n  controlBtn: {\r\n    margin: \"5px\",\r\n  },\r\n  callEndBtn: {\r\n    margin: \"5px\",\r\n    backgroundColor: \"red\",\r\n  },\r\n  video: {\r\n    height: window.innerHeight - 112 + \"px\",\r\n    width: (window.innerWidth - 74) / 2 + \"px\",\r\n  },\r\n\r\n  videoMobile: {\r\n    height: (window.innerHeight - 112) / 2 + \"px\",\r\n    width: window.innerWidth + \"px\",\r\n  },\r\n}));\r\n\r\nexport default function DailCall() {\r\n  const params = useParams();\r\n  const history = useHistory();\r\n  const callId = params.id;\r\n  const classes = useStyles();\r\n  const [stream, setStream] = useState();\r\n  const [audio, setAudio] = useState(true);\r\n  const [video, setVideo] = useState(true);\r\n  const [userId] = useState(0);\r\n  let videoGrid;\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n  const peer = new Peer(user._id, {\r\n    port: \"443\",\r\n    secure: true,\r\n    host: \"school-peer.herokuapp.com\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    videoGrid = document.getElementById(\"video-grid\");\r\n    callUser(user._id, callId);\r\n    loadMedia();\r\n  }, [userId]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      console.log(\"End\");\r\n    };\r\n  }, []);\r\n\r\n  function switchVideo(val) {\r\n    setVideo(val);\r\n    stream.getVideoTracks()[0].enabled = val;\r\n  }\r\n\r\n  function switchAudio(val) {\r\n    setAudio(val);\r\n    stream.getAudioTracks()[0].enabled = val;\r\n  }\r\n\r\n  function callEnd() {\r\n    stream.getTracks().forEach(function (track) {\r\n      track.stop();\r\n    });\r\n    history.push(\"/app/contacts\");\r\n  }\r\n\r\n  function isMobile() {\r\n    return (\r\n      navigator.userAgent.match(/Android/i) ||\r\n      navigator.userAgent.match(/webOS/i) ||\r\n      navigator.userAgent.match(/iPhone/i) ||\r\n      navigator.userAgent.match(/iPad/i) ||\r\n      navigator.userAgent.match(/iPod/i) ||\r\n      navigator.userAgent.match(/BlackBerry/i) ||\r\n      navigator.userAgent.match(/Windows Phone/i)\r\n    );\r\n  }\r\n  function callUser(from, to) {\r\n    fetch(\r\n      \"https://teachit-api.herokuapp.com/teachit/api/v1/user/\" +\r\n        to +\r\n        \"/\" +\r\n        from,\r\n      {\r\n        method: \"get\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    )\r\n      .then((Response) => Response.json())\r\n      .then((response) => {\r\n        if (response) {\r\n          console.log(response);\r\n        } else {\r\n          console.log(\"unable to inser\");\r\n        }\r\n      });\r\n  }\r\n\r\n  function loadMedia() {\r\n    const myVideo = document.createElement(\"video\");\r\n    myVideo.setAttribute(\r\n      \"class\",\r\n      isMobile() ? classes.videoMobile : classes.video\r\n    );\r\n    myVideo.muted = true;\r\n    navigator.mediaDevices\r\n      .getUserMedia({\r\n        video: true,\r\n        audio: true,\r\n      })\r\n      .then((stream) => {\r\n        setStream(stream);\r\n        addVideoStream(myVideo, stream);\r\n        console.log(\"Call started\");\r\n        peer.on(\"call\", function (call) {\r\n          debugger;\r\n          console.log(\"Received the call from source2\");\r\n          call.answer(stream);\r\n          call.on(\"stream\", function (userStream) {\r\n            console.log(\"source2 stream connected\");\r\n            if (!document.getElementById(callId)) {\r\n              console.log(\"source1 stream adding to the console\");\r\n              const myVide = document.createElement(\"video\");\r\n              myVide.setAttribute(\r\n                \"class\",\r\n                isMobile() ? classes.videoMobile : classes.video\r\n              );\r\n              myVide.setAttribute(\"id\", callId);\r\n              addVideoStream(myVide, userStream);\r\n            }\r\n          });\r\n        });\r\n      });\r\n  }\r\n\r\n  function addVideoStream(video, stream) {\r\n    video.srcObject = stream;\r\n    video.addEventListener(\"loadedmetadata\", () => {\r\n      video.play();\r\n    });\r\n    videoGrid.append(video);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"row\" container>\r\n        <div id=\"video-grid\" className=\"\"></div>\r\n      </div>\r\n      <AppBar position=\"fixed\" color=\"primary\" className={classes.appBar}>\r\n        <Toolbar>\r\n          <div className={classes.grow}>\r\n            <IconButton\r\n              color=\"inherit\"\r\n              onClick={() => switchVideo(!video)}\r\n              edge=\"end\"\r\n              className={classes.controlBtn}\r\n            >\r\n              {video ? <VideocamIcon /> : <VideocamOffIcon />}\r\n            </IconButton>\r\n            <IconButton\r\n              edge=\"end\"\r\n              color=\"inherit\"\r\n              onClick={() => switchAudio(!audio)}\r\n              className={classes.controlBtn}\r\n            >\r\n              {audio ? <MicIcon /> : <MicOffIcon />}\r\n            </IconButton>\r\n            <IconButton\r\n              color=\"inherit\"\r\n              onClick={() => callEnd()}\r\n              edge=\"end\"\r\n              className={classes.callEndBtn}\r\n            >\r\n              <CallEndIcon />\r\n            </IconButton>\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <audio className=\"audio-element\">\r\n        <source src=\"sample.mp3\"></source>\r\n      </audio>\r\n    </div>\r\n  );\r\n}\r\n","import { AppBar, IconButton, makeStyles, Toolbar } from \"@material-ui/core\";\r\nimport CallEndIcon from \"@material-ui/icons/CallEnd\";\r\nimport MicIcon from \"@material-ui/icons/Mic\";\r\nimport MicOffIcon from \"@material-ui/icons/MicOff\";\r\nimport VideocamIcon from \"@material-ui/icons/Videocam\";\r\nimport VideocamOffIcon from \"@material-ui/icons/VideocamOff\";\r\nimport Peer from \"peerjs\";\r\nimport React, { useState } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    top: \"auto\",\r\n    bottom: 0,\r\n  },\r\n  grow: {\r\n    float: \"right\",\r\n    position: \"absolute\",\r\n    right: \"30px\",\r\n  },\r\n  controlBtn: {\r\n    margin: \"5px\",\r\n  },\r\n  callEndBtn: {\r\n    margin: \"5px\",\r\n    backgroundColor: \"red\",\r\n  },\r\n  video: {\r\n    height: window.innerHeight - 112 + \"px\",\r\n    width: (window.innerWidth - 74) / 2 + \"px\",\r\n  },\r\n\r\n  videoMobile: {\r\n    height: (window.innerHeight - 112) / 2 + \"px\",\r\n    width: window.innerWidth + \"px\",\r\n  },\r\n}));\r\n\r\nexport default function ReceiveCall() {\r\n  const history = useHistory();\r\n  const params = useParams();\r\n  const callId = params.id;\r\n  const classes = useStyles();\r\n  const [stream, setStream] = useState();\r\n  const [audio, setAudio] = useState(true);\r\n  const [video, setVideo] = useState(true);\r\n  const [userId] = useState(0);\r\n  let videoGrid;\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n  const peer = new Peer(user._id, {\r\n    port: \"443\",\r\n    secure: true,\r\n    host: \"school-peer.herokuapp.com\",\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    videoGrid = document.getElementById(\"video-grid\");\r\n    console.log(\"hai\");\r\n    loadMedia();\r\n    return () => {\r\n      if (stream)\r\n        stream.getTracks().forEach(function (track) {\r\n          track.stop();\r\n        });\r\n    };\r\n  }, [userId]);\r\n\r\n  function switchVideo(val) {\r\n    setVideo(val);\r\n    stream.getVideoTracks()[0].enabled = val;\r\n  }\r\n  function switchAudio(val) {\r\n    setAudio(val);\r\n    stream.getAudioTracks()[0].enabled = val;\r\n  }\r\n  function isMobile() {\r\n    return (\r\n      navigator.userAgent.match(/Android/i) ||\r\n      navigator.userAgent.match(/webOS/i) ||\r\n      navigator.userAgent.match(/iPhone/i) ||\r\n      navigator.userAgent.match(/iPad/i) ||\r\n      navigator.userAgent.match(/iPod/i) ||\r\n      navigator.userAgent.match(/BlackBerry/i) ||\r\n      navigator.userAgent.match(/Windows Phone/i)\r\n    );\r\n  }\r\n  function callEnd() {\r\n    stream.getTracks().forEach(function (track) {\r\n      track.stop();\r\n    });\r\n    history.push(\"/app/contacts\");\r\n  }\r\n  function loadMedia() {\r\n    const myVideo = document.createElement(\"video\");\r\n    myVideo.setAttribute(\r\n      \"class\",\r\n      isMobile() ? classes.videoMobile : classes.video\r\n    );\r\n    myVideo.muted = true;\r\n    navigator.mediaDevices\r\n      .getUserMedia({\r\n        video: true,\r\n        audio: true,\r\n      })\r\n      .then((stream) => {\r\n        // setControl(true);\r\n        console.log(\"Call received\");\r\n        setStream(stream);\r\n        addVideoStream(myVideo, stream);\r\n        setTimeout(() => {\r\n          var call = peer.call(callId, stream);\r\n          console.log(\"Calling to the diler {}\", call);\r\n          debugger;\r\n          if (call)\r\n            call.on(\"stream\", function (destinationStream) {\r\n              console.log(\"source1 stream connected\");\r\n              if (!document.getElementById(callId)) {\r\n                console.log(\"source1 stream adding to the console\");\r\n                const myVideo = document.createElement(\"video\");\r\n                myVideo.setAttribute(\r\n                  \"class\",\r\n                  isMobile() ? classes.videoMobile : classes.video\r\n                );\r\n                myVideo.setAttribute(\"id\", callId);\r\n                addVideoStream(myVideo, destinationStream);\r\n              }\r\n            });\r\n        }, 2000);\r\n      });\r\n  }\r\n\r\n  function addVideoStream(video, stream) {\r\n    video.srcObject = stream;\r\n    video.addEventListener(\"loadedmetadata\", () => {\r\n      video.play();\r\n    });\r\n    videoGrid.append(video);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"row\" container>\r\n        <div id=\"video-grid\" className=\"\"></div>\r\n      </div>\r\n      <AppBar position=\"fixed\" color=\"primary\" className={classes.appBar}>\r\n        <Toolbar>\r\n          <div className={classes.grow}>\r\n            <IconButton\r\n              color=\"inherit\"\r\n              onClick={() => switchVideo(!video)}\r\n              edge=\"end\"\r\n              className={classes.controlBtn}\r\n            >\r\n              {video ? <VideocamIcon /> : <VideocamOffIcon />}\r\n            </IconButton>\r\n            <IconButton\r\n              edge=\"end\"\r\n              color=\"inherit\"\r\n              onClick={() => switchAudio(!audio)}\r\n              className={classes.controlBtn}\r\n            >\r\n              {audio ? <MicIcon /> : <MicOffIcon />}\r\n            </IconButton>\r\n            <IconButton\r\n              color=\"inherit\"\r\n              onClick={() => callEnd()}\r\n              edge=\"end\"\r\n              className={classes.callEndBtn}\r\n            >\r\n              <CallEndIcon />\r\n            </IconButton>\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n}\r\n","import {\r\n  Avatar,\r\n  Backdrop,\r\n  CircularProgress,\r\n  IconButton,\r\n  List,\r\n  ListItem,\r\n  ListItemAvatar,\r\n  ListItemSecondaryAction,\r\n  ListItemText,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\nimport { Call, Message, VideoCall } from \"@material-ui/icons\";\r\nimport React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { getContacts } from \"../../context/UserContext\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    maxWidth: 752,\r\n  },\r\n  demo: {\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  title: {\r\n    margin: theme.spacing(4, 0, 2),\r\n  },\r\n  appBar: {\r\n    top: \"auto\",\r\n    bottom: 0,\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nexport default function Contacts() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const [dense] = React.useState(false);\r\n  const [data, setData] = React.useState([]);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [userId] = React.useState(0);\r\n  React.useEffect(() => {\r\n    getContacts(setData, setLoading);\r\n  }, [userId]);\r\n\r\n  function call(id) {\r\n    history.push(\"/app/call2/\" + id);\r\n  }\r\n  const handleClose = () => {\r\n    // setLoading(false);\r\n  };\r\n  return (\r\n    <>\r\n      <h1>Contacts</h1>\r\n      <div className={classes.demo}>\r\n        <List dense={dense}>\r\n          {data.length > 0\r\n            ? data.map(({ firstName, lastName, email, _id }) => (\r\n                <ListItem key={_id}>\r\n                  <ListItemAvatar>\r\n                    <Avatar>\r\n                      <Message />\r\n                    </Avatar>\r\n                  </ListItemAvatar>\r\n                  <ListItemText\r\n                    primary={firstName + \" \" + lastName}\r\n                    secondary={email}\r\n                  />\r\n                  <ListItemSecondaryAction>\r\n                    <IconButton\r\n                      edge=\"end\"\r\n                      aria-label=\"audio\"\r\n                      onClick={() => call(_id)}\r\n                    >\r\n                      <Call />\r\n                    </IconButton>\r\n                    <IconButton edge=\"end\" aria-label=\"video\">\r\n                      <VideoCall />\r\n                    </IconButton>\r\n                  </ListItemSecondaryAction>\r\n                </ListItem>\r\n              ))\r\n            : []}\r\n        </List>\r\n      </div>\r\n      <Backdrop\r\n        className={classes.backdrop}\r\n        open={loading}\r\n        onClick={handleClose}\r\n      >\r\n        <CircularProgress />\r\n      </Backdrop>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Messages() {\r\n  return (\r\n    <>\r\n      <h1>Messages</h1>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nvar LayoutStateContext = React.createContext();\r\nvar LayoutDispatchContext = React.createContext();\r\n\r\nfunction layoutReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"TOGGLE_SIDEBAR\":\r\n      return { ...state, isSidebarOpened: !state.isSidebarOpened };\r\n    default: {\r\n      throw new Error(`Unhandled action type: ${action.type}`);\r\n    }\r\n  }\r\n}\r\n\r\nfunction LayoutProvider({ children }) {\r\n  var [state, dispatch] = React.useReducer(layoutReducer, {\r\n    isSidebarOpened: false,\r\n  });\r\n  return (\r\n    <LayoutStateContext.Provider value={state}>\r\n      <LayoutDispatchContext.Provider value={dispatch}>\r\n        {children}\r\n      </LayoutDispatchContext.Provider>\r\n    </LayoutStateContext.Provider>\r\n  );\r\n}\r\n\r\nfunction useLayoutState() {\r\n  var context = React.useContext(LayoutStateContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useLayoutState must be used within a LayoutProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nfunction useLayoutDispatch() {\r\n  var context = React.useContext(LayoutDispatchContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useLayoutDispatch must be used within a LayoutProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport { LayoutProvider, useLayoutState, useLayoutDispatch, toggleSidebar };\r\n\r\n// ###########################################################\r\nfunction toggleSidebar(dispatch) {\r\n  dispatch({\r\n    type: \"TOGGLE_SIDEBAR\",\r\n  });\r\n}\r\n","import { makeStyles } from \"@material-ui/styles\";\r\n\r\nexport default makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n  logotype: {\r\n    color: \"white\",\r\n    marginLeft: theme.spacing(2.5),\r\n    marginRight: theme.spacing(2.5),\r\n    fontWeight: 500,\r\n    fontSize: 18,\r\n    whiteSpace: \"nowrap\",\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n  appBar: {\r\n    width: \"100vw\",\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create([\"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  toolbar: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(2),\r\n  },\r\n  hide: {\r\n    display: \"none\",\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  headerMenuButton: {\r\n    marginLeft: theme.spacing(2),\r\n    padding: theme.spacing(0.5),\r\n  },\r\n  headerMenuButtonCollapse: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  headerIcon: {\r\n    fontSize: 28,\r\n    color: \"rgba(255, 255, 255, 0.35)\",\r\n  },\r\n  headerIconCollapse: {\r\n    color: \"white\",\r\n  },\r\n}));\r\n","import { AppBar, IconButton, Toolbar, Typography } from \"@material-ui/core\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport {\r\n  ArrowBack as ArrowBackIcon,\r\n  Menu as MenuIcon,\r\n} from \"@material-ui/icons\";\r\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\r\nimport classNames from \"classnames\";\r\nimport React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n// context\r\nimport {\r\n  toggleSidebar,\r\n  useLayoutDispatch,\r\n  useLayoutState,\r\n} from \"../../context/LayoutContext\";\r\nimport { signOut, useUserDispatch } from \"../../context/UserContext\";\r\n// styles\r\nimport useStyles from \"./styles\";\r\n\r\nexport default function Header(props) {\r\n  var classes = useStyles();\r\n  var dispatch = useUserDispatch();\r\n  const history = useHistory();\r\n\r\n  // global\r\n  var layoutState = useLayoutState();\r\n  var layoutDispatch = useLayoutDispatch();\r\n  const [auth, setAuth] = React.useState(true);\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const open = Boolean(anchorEl);\r\n\r\n  const handleChange = (event) => {\r\n    setAuth(event.target.checked);\r\n  };\r\n\r\n  const handleMenu = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const logOut = () => {\r\n    signOut(dispatch, history);\r\n  };\r\n\r\n  // local\r\n  var [isSearchOpen, setSearchOpen] = useState(false);\r\n\r\n  return (\r\n    <AppBar position=\"fixed\" className={classes.appBar}>\r\n      <Toolbar className={classes.toolbar} variant=\"dense\">\r\n        <IconButton\r\n          color=\"inherit\"\r\n          onClick={() => toggleSidebar(layoutDispatch)}\r\n          className={classNames(\r\n            classes.headerMenuButton,\r\n            classes.headerMenuButtonCollapse\r\n          )}\r\n        >\r\n          {layoutState.isSidebarOpened ? (\r\n            <ArrowBackIcon\r\n              classes={{\r\n                root: classNames(\r\n                  classes.headerIcon,\r\n                  classes.headerIconCollapse\r\n                ),\r\n              }}\r\n            />\r\n          ) : (\r\n            <MenuIcon\r\n              classes={{\r\n                root: classNames(\r\n                  classes.headerIcon,\r\n                  classes.headerIconCollapse\r\n                ),\r\n              }}\r\n            />\r\n          )}\r\n        </IconButton>\r\n        <Typography className={classes.title} variant=\"h6\" noWrap>\r\n          TeachIT\r\n        </Typography>\r\n\r\n        <div>\r\n          <IconButton\r\n            aria-label=\"account of current user\"\r\n            aria-controls=\"menu-appbar\"\r\n            aria-haspopup=\"true\"\r\n            onClick={handleMenu}\r\n            color=\"inherit\"\r\n          >\r\n            <AccountCircle />\r\n          </IconButton>\r\n          <Menu\r\n            id=\"menu-appbar\"\r\n            anchorEl={anchorEl}\r\n            anchorOrigin={{\r\n              vertical: \"top\",\r\n              horizontal: \"right\",\r\n            }}\r\n            keepMounted\r\n            transformOrigin={{\r\n              vertical: \"top\",\r\n              horizontal: \"right\",\r\n            }}\r\n            open={open}\r\n            onClose={handleClose}\r\n          >\r\n            <MenuItem onClick={handleClose}>Profile</MenuItem>\r\n            <MenuItem onClick={handleClose}>My account</MenuItem>\r\n            <MenuItem onClick={logOut}>Sign Out</MenuItem>\r\n          </Menu>\r\n        </div>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import { makeStyles } from \"@material-ui/styles\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nexport default makeStyles((theme) => ({\r\n  menuButton: {\r\n    marginLeft: 12,\r\n    marginRight: 36,\r\n  },\r\n  hide: {\r\n    display: \"none\",\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n    whiteSpace: \"nowrap\",\r\n  },\r\n  drawerOpen: {\r\n    width: drawerWidth,\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  drawerClose: {\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    overflowX: \"hidden\",\r\n    width: theme.spacing(7) + 0,\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      width: drawerWidth,\r\n    },\r\n  },\r\n  toolbar: {\r\n    ...theme.mixins.toolbar,\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n  },\r\n  /* sidebarList: {\r\n    marginTop: theme.spacing(6),\r\n  }, */\r\n  mobileBackButton: {\r\n    marginTop: theme.spacing(0.5),\r\n    marginLeft: theme.spacing(3),\r\n    [theme.breakpoints.only(\"sm\")]: {\r\n      marginTop: theme.spacing(0.625),\r\n    },\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n}));\r\n","import {\r\n  Collapse,\r\n  Divider,\r\n  List,\r\n  ListItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Inbox as InboxIcon } from \"@material-ui/icons\";\r\nimport classnames from \"classnames\";\r\nimport React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n// styles\r\nimport useStyles from \"./styles\";\r\n\r\nexport default function SidebarLink({\r\n  link,\r\n  icon,\r\n  label,\r\n  children,\r\n  location,\r\n  isSidebarOpened,\r\n  nested,\r\n  type,\r\n}) {\r\n  var classes = useStyles();\r\n\r\n  // local\r\n  var [isOpen, setIsOpen] = useState(false);\r\n  var isLinkActive =\r\n    link &&\r\n    (location.pathname === link || location.pathname.indexOf(link) !== -1);\r\n\r\n  if (type === \"title\")\r\n    return (\r\n      <Typography\r\n        className={classnames(classes.linkText, classes.sectionTitle, {\r\n          [classes.linkTextHidden]: !isSidebarOpened,\r\n        })}\r\n      >\r\n        {label}\r\n      </Typography>\r\n    );\r\n\r\n  if (type === \"divider\") return <Divider className={classes.divider} />;\r\n\r\n  if (!children)\r\n    return (\r\n      <ListItem\r\n        button\r\n        component={link && Link}\r\n        to={link}\r\n        className={classes.link}\r\n        classes={{\r\n          root: classnames(classes.linkRoot, {\r\n            [classes.linkActive]: isLinkActive && !nested,\r\n            [classes.linkNested]: nested,\r\n          }),\r\n        }}\r\n        disableRipple\r\n      >\r\n        <ListItemIcon\r\n          className={classnames(classes.linkIcon, {\r\n            [classes.linkIconActive]: isLinkActive,\r\n          })}\r\n        >\r\n          {nested ? icon : icon}\r\n        </ListItemIcon>\r\n        <ListItemText\r\n          classes={{\r\n            primary: classnames(classes.linkText, {\r\n              [classes.linkTextActive]: isLinkActive,\r\n              [classes.linkTextHidden]: !isSidebarOpened,\r\n            }),\r\n          }}\r\n          primary={label}\r\n        />\r\n      </ListItem>\r\n    );\r\n\r\n  return (\r\n    <>\r\n      <ListItem\r\n        button\r\n        component={link && Link}\r\n        onClick={toggleCollapse}\r\n        className={classes.link}\r\n        to={link}\r\n        disableRipple\r\n      >\r\n        <ListItemIcon\r\n          className={classnames(classes.linkIcon, {\r\n            [classes.linkIconActive]: isLinkActive,\r\n          })}\r\n        >\r\n          {icon ? icon : <InboxIcon />}\r\n        </ListItemIcon>\r\n        <ListItemText\r\n          classes={{\r\n            primary: classnames(classes.linkText, {\r\n              [classes.linkTextActive]: isLinkActive,\r\n              [classes.linkTextHidden]: !isSidebarOpened,\r\n            }),\r\n          }}\r\n          primary={label}\r\n        />\r\n      </ListItem>\r\n      {children && (\r\n        <Collapse\r\n          in={isOpen && isSidebarOpened}\r\n          timeout=\"auto\"\r\n          unmountOnExit\r\n          className={classes.nestedList}\r\n        >\r\n          <List component=\"div\" disablePadding>\r\n            {children.map((childrenLink) => (\r\n              <SidebarLink\r\n                key={childrenLink && childrenLink.link}\r\n                location={location}\r\n                isSidebarOpened={isSidebarOpened}\r\n                classes={classes}\r\n                nested\r\n                {...childrenLink}\r\n              />\r\n            ))}\r\n          </List>\r\n        </Collapse>\r\n      )}\r\n    </>\r\n  );\r\n\r\n  // ###########################################################\r\n\r\n  function toggleCollapse(e) {\r\n    if (isSidebarOpened) {\r\n      e.preventDefault();\r\n      setIsOpen(!isOpen);\r\n    }\r\n  }\r\n}\r\n","import { Drawer, IconButton, List } from \"@material-ui/core\";\r\nimport {\r\n  ArrowBack as ArrowBackIcon,\r\n  Call,\r\n  Contacts,\r\n  Message,\r\n} from \"@material-ui/icons\";\r\nimport { useTheme } from \"@material-ui/styles\";\r\nimport classNames from \"classnames\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\n// context\r\nimport {\r\n  toggleSidebar,\r\n  useLayoutDispatch,\r\n  useLayoutState,\r\n} from \"../../context/LayoutContext\";\r\n// components\r\nimport SidebarLink from \"./SidebarLink\";\r\n// styles\r\nimport useStyles from \"./styles\";\r\n\r\nconst structure = [\r\n  { id: 1, label: \"Calls\", link: \"/app/calls\", icon: <Call /> },\r\n  { id: 2, label: \"Messages\", link: \"/app/messages\", icon: <Message /> },\r\n  { id: 3, label: \"Contacts\", link: \"/app/contacts\", icon: <Contacts /> },\r\n];\r\n\r\nfunction Sidebar({ location }) {\r\n  var classes = useStyles();\r\n  var theme = useTheme();\r\n\r\n  // global\r\n  var { isSidebarOpened } = useLayoutState();\r\n  var layoutDispatch = useLayoutDispatch();\r\n\r\n  // local\r\n  var [isPermanent, setPermanent] = useState(true);\r\n\r\n  useEffect(function () {\r\n    window.addEventListener(\"resize\", handleWindowWidthChange);\r\n    handleWindowWidthChange();\r\n    return function cleanup() {\r\n      window.removeEventListener(\"resize\", handleWindowWidthChange);\r\n    };\r\n  });\r\n\r\n  return (\r\n    <Drawer\r\n      variant={isPermanent ? \"permanent\" : \"temporary\"}\r\n      className={classNames(classes.drawer, {\r\n        [classes.drawerOpen]: isSidebarOpened,\r\n        [classes.drawerClose]: !isSidebarOpened,\r\n      })}\r\n      classes={{\r\n        paper: classNames({\r\n          [classes.drawerOpen]: isSidebarOpened,\r\n          [classes.drawerClose]: !isSidebarOpened,\r\n        }),\r\n      }}\r\n      open={isSidebarOpened}\r\n    >\r\n      <div className={classes.toolbar} />\r\n      <div className={classes.mobileBackButton}>\r\n        <IconButton onClick={() => toggleSidebar(layoutDispatch)}>\r\n          <ArrowBackIcon\r\n            classes={{\r\n              root: classNames(classes.headerIcon, classes.headerIconCollapse),\r\n            }}\r\n          />\r\n        </IconButton>\r\n      </div>\r\n      <List className={classes.sidebarList}>\r\n        {structure.map((link) => (\r\n          <SidebarLink\r\n            key={link.id}\r\n            location={location}\r\n            isSidebarOpened={isSidebarOpened}\r\n            {...link}\r\n          />\r\n        ))}\r\n      </List>\r\n    </Drawer>\r\n  );\r\n\r\n  // ##################################################################\r\n  function handleWindowWidthChange() {\r\n    var windowWidth = window.innerWidth;\r\n    var breakpointWidth = theme.breakpoints.values.md;\r\n    var isSmallScreen = windowWidth < breakpointWidth;\r\n\r\n    if (isSmallScreen && isPermanent) {\r\n      setPermanent(false);\r\n    } else if (!isSmallScreen && !isPermanent) {\r\n      setPermanent(true);\r\n    }\r\n  }\r\n}\r\n\r\nexport default withRouter(Sidebar);\r\n","import { IconButton } from \"@material-ui/core\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport CallIcon from \"@material-ui/icons/Call\";\r\nimport CallEndIcon from \"@material-ui/icons/CallEnd\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { getUserById } from \"../../context/UserContext\";\r\n\r\nfunction rand() {\r\n  return Math.round(Math.random() * 20) - 10;\r\n}\r\n\r\nfunction getModalStyle() {\r\n  const top = 50 + rand();\r\n  const left = 50 + rand();\r\n\r\n  return {\r\n    top: `${top}%`,\r\n    left: `${left}%`,\r\n    transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    position: \"absolute\",\r\n    width: 400,\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[9],\r\n    padding: theme.spacing(2, 4, 3),\r\n  },\r\n  callEnd: {\r\n    backgroundColor: \"#eb0905\",\r\n    color: \"#fff\",\r\n    marginLeft: \"50px\",\r\n  },\r\n  callAnswer: {\r\n    backgroundColor: \"#237301\",\r\n    color: \"#fff\",\r\n    float: \"right\",\r\n    marginRight: \"50px\",\r\n  },\r\n  callImg: {\r\n    justifyContent: \"center\",\r\n    textAlign: \"center\",\r\n    backgroundColor: \"#040e46\",\r\n    width: \"100px\",\r\n    height: \"100px\",\r\n    borderRadius: \"50px\",\r\n    margin: \"0 auto\",\r\n    color: \"#ffffff\",\r\n  },\r\n  callText: { position: \"relative\", top: \"30%\", fontSize: \"xx-large\" },\r\n  callName: {\r\n    textAlign: \"center\",\r\n  },\r\n}));\r\n\r\nexport default function CallModal({ callId, playing, toggle }) {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const [modalStyle] = useState(getModalStyle);\r\n  const [open, setOpen] = useState(true);\r\n  const [user, setUser] = useState();\r\n\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n  };\r\n  useEffect(() => {\r\n    if (callId && callId.status) getUserById(callId.status, setUser);\r\n    return () => {};\r\n  }, [callId]);\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  function callEnd() {\r\n    setOpen(false);\r\n    toggle();\r\n  }\r\n  function answer() {\r\n    setOpen(false);\r\n    toggle();\r\n    history.push(\"/app/call/\" + callId.status);\r\n  }\r\n\r\n  const body = (\r\n    <div style={modalStyle} className={classes.paper}>\r\n      <div className={classes.callImg}>\r\n        <span className={classes.callText}>\r\n          {\" \"}\r\n          {user\r\n            ? user.firstName.slice(0, 1).toUpperCase() +\r\n              user.lastName.slice(0, 1).toUpperCase()\r\n            : \"\"}\r\n        </span>\r\n      </div>\r\n      <div className={classes.callName}>\r\n        <h2 id=\"simple-modal-title\">\r\n          {user ? user.firstName + \" \" + user.lastName : \"\"}\r\n        </h2>\r\n        <p>Is calling...</p>\r\n      </div>\r\n      <IconButton\r\n        edge=\"end\"\r\n        aria-label=\"end\"\r\n        className={classes.callEnd}\r\n        onClick={() => callEnd()}\r\n      >\r\n        <CallEndIcon />\r\n      </IconButton>\r\n      <IconButton\r\n        edge=\"end\"\r\n        aria-label=\"answer\"\r\n        className={classes.callAnswer}\r\n        onClick={() => answer()}\r\n      >\r\n        <CallIcon />\r\n      </IconButton>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <button type=\"button\" onClick={handleOpen}>\r\n        Open Modal\r\n      </button>\r\n      <Modal\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"simple-modal-title\"\r\n        aria-describedby=\"simple-modal-description\"\r\n      >\r\n        {body}\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import { makeStyles } from \"@material-ui/styles\";\r\n\r\nexport default makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    maxWidth: \"100vw\",\r\n    overflowX: \"hidden\",\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    // padding: theme.spacing(3),\r\n    width: `calc(100vw - 240px)`,\r\n    margin: \"48px 0px 64px 0px\",\r\n  },\r\n  contentShift: {\r\n    width: `calc(100vw - ${240 + theme.spacing(6)}px)`,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  fakeToolbar: {\r\n    ...theme.mixins.toolbar,\r\n  },\r\n}));\r\n","import classnames from \"classnames\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Route, Switch, withRouter } from \"react-router-dom\";\r\nimport io from \"socket.io-client\";\r\n// context\r\nimport { useLayoutState } from \"../../context/LayoutContext\";\r\nimport Calls from \"../../pages/calls/Calls\";\r\nimport DailCall from \"../../pages/calls/DailCall\";\r\nimport ReceiveCall from \"../../pages/calls/ReceiveCall\";\r\nimport Contacts from \"../../pages/contacts/Contacts\";\r\nimport Messages from \"../../pages/messages/Messages\";\r\n// components\r\nimport Header from \"../header/Header\";\r\nimport Sidebar from \"../sidebar/Sidebar\";\r\nimport CallModal from \"./CallModal\";\r\n// styles\r\nimport useStyles from \"./styles\";\r\nconst ENDPOINT = \"https://teachit-api.herokuapp.com\";\r\n\r\nconst useAudio = (url) => {\r\n  const [audio] = useState(new Audio(url));\r\n  const [playing, setPlaying] = useState(false);\r\n\r\n  const toggle = () => setPlaying(!playing);\r\n\r\n  useEffect(() => {\r\n    audio.loop = true;\r\n    playing ? audio.play() : audio.pause();\r\n  }, [playing]);\r\n\r\n  useEffect(() => {\r\n    audio.addEventListener(\"ended\", () => {\r\n      setPlaying(true);\r\n    });\r\n    return () => {\r\n      audio.removeEventListener(\"ended\", () => setPlaying(false));\r\n    };\r\n  }, []);\r\n\r\n  return [playing, toggle];\r\n};\r\n\r\nconst style = {\r\n  height: window.innerHeight - 112 + \"px\",\r\n};\r\nfunction Layout(props) {\r\n  const [playing, toggle] = useAudio(\"telephone_ring.mp3\");\r\n  const socket = io(ENDPOINT);\r\n  var classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [callId, setCallId] = React.useState();\r\n  const [userId, setUserID] = React.useState(10);\r\n  React.useEffect(() => {\r\n    let user = JSON.parse(localStorage.getItem(\"user\"));\r\n    socket.on(user._id, (toId) => {\r\n      setOpen(true);\r\n      toggle();\r\n      setCallId(toId);\r\n    });\r\n  }, [userId]);\r\n  // global\r\n  var layoutState = useLayoutState();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <>\r\n        <Header history={props.history} />\r\n        <Sidebar />\r\n        <div\r\n          className={classnames(classes.content, {\r\n            [classes.contentShift]: layoutState.isSidebarOpened,\r\n          })}\r\n        >\r\n          <div style={style}>\r\n            {/* <div className={classes.fakeToolbar} /> */}\r\n            <Switch>\r\n              <Route path=\"/app/calls\" component={Calls} />\r\n              <Route path=\"/app/call/:id\" component={ReceiveCall} />\r\n              <Route path=\"/app/call2/:id\" component={DailCall} />\r\n              <Route path=\"/app/messages\" component={Messages} />\r\n              <Route path=\"/app/contacts\" component={Contacts} />\r\n            </Switch>\r\n          </div>\r\n        </div>\r\n        {open ? (\r\n          <CallModal callId={callId} playing={playing} toggle={toggle} />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(Layout);\r\n","import { Backdrop, CircularProgress } from \"@material-ui/core\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { loginUser, useUserDispatch } from \"../context/UserContext\";\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {\"Copyright © \"}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{\" \"}\r\n      {new Date().getFullYear()}\r\n      {\".\"}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nexport default function SignIn() {\r\n  const classes = useStyles();\r\n  var userDispatch = useUserDispatch();\r\n  const history = useHistory();\r\n\r\n  var [isLoading, setIsLoading] = useState(false);\r\n  var [error, setError] = useState(null);\r\n  const [values, setValues] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setValues({ ...values, [name]: value });\r\n  };\r\n\r\n  function login() {\r\n    loginUser(\r\n      userDispatch,\r\n      values.email,\r\n      values.password,\r\n      history,\r\n      setIsLoading,\r\n      setError\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign in\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email Address\"\r\n            name=\"email\"\r\n            onChange={handleInputChange}\r\n            value={values.email}\r\n            autoComplete=\"email\"\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            onChange={handleInputChange}\r\n            value={values.password}\r\n            autoComplete=\"current-password\"\r\n          />\r\n          <FormControlLabel\r\n            control={<Checkbox value=\"remember\" color=\"primary\" />}\r\n            label=\"Remember me\"\r\n          />\r\n          <Button\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n            onClick={login}\r\n          >\r\n            Sign In\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link href=\"#\" variant=\"body2\">\r\n                Forgot password?\r\n              </Link>\r\n            </Grid>\r\n            <Grid item>\r\n              <Link href=\"#/signup\" variant=\"body2\">\r\n                {\"Don't have an account? Sign Up\"}\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n      {error}\r\n      <Backdrop className={classes.backdrop} open={isLoading}>\r\n        <CircularProgress />\r\n      </Backdrop>\r\n    </Container>\r\n  );\r\n}\r\n","import Avatar from \"@material-ui/core/Avatar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {\"Copyright © \"}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{\" \"}\r\n      {new Date().getFullYear()}\r\n      {\".\"}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function SignUp() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const [values, setValues] = useState({\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setValues({ ...values, [name]: value });\r\n  };\r\n\r\n  function save(event) {\r\n    event.preventDefault();\r\n    fetch(\"https://teachit-api.herokuapp.com/teachit/api/v1/user\", {\r\n      method: \"post\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(values),\r\n    })\r\n      .then((Response) => Response.json())\r\n      .then((response) => {\r\n        if (response.user) history.push(\"/app\");\r\n        else alert(\"Sorrrrrry !!!! Un-authenticated User !!!!!\");\r\n      });\r\n  }\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign up\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                autoComplete=\"fname\"\r\n                name=\"firstName\"\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"firstName\"\r\n                label=\"First Name\"\r\n                onChange={handleInputChange}\r\n                value={values.firstName}\r\n                autoFocus\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"lastName\"\r\n                label=\"Last Name\"\r\n                name=\"lastName\"\r\n                onChange={handleInputChange}\r\n                value={values.lastName}\r\n                autoComplete=\"lname\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Email Address\"\r\n                name=\"email\"\r\n                onChange={handleInputChange}\r\n                value={values.email}\r\n                autoComplete=\"email\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                onChange={handleInputChange}\r\n                value={values.password}\r\n                autoComplete=\"current-password\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControlLabel\r\n                control={<Checkbox value=\"allowExtraEmails\" color=\"primary\" />}\r\n                label=\"I want to receive inspiration, marketing promotions and updates via email.\"\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n            onClick={save}\r\n          >\r\n            Sign Up\r\n          </Button>\r\n          <Grid container justify=\"flex-end\">\r\n            <Grid item>\r\n              <Link href=\"#/login\" variant=\"body2\">\r\n                Already have an account? Sign in\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={5}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { BrowserRouter, Redirect, Route, Switch } from \"react-router-dom\";\r\nimport { useUserState } from \"../context/UserContext\";\r\nimport Calls from \"../pages/calls/Calls\";\r\nimport DailCall from \"../pages/calls/DailCall\";\r\nimport ReceiveCall from \"../pages/calls/ReceiveCall\";\r\nimport Contacts from \"../pages/contacts/Contacts\";\r\nimport Messages from \"../pages/messages/Messages\";\r\n// components\r\nimport Layout from \"./layout/Layout\";\r\n// pages\r\nimport Login from \"./Login\";\r\nimport SignUp from \"./Signup\";\r\n\r\nexport default function App() {\r\n  // global\r\n  var { isAuthenticated } = useUserState();\r\n  // var isAuthenticated = false;\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <Switch>\r\n        <Route exact path=\"/\" render={() => <Redirect to=\"/app/contacts\" />} />\r\n        <Route\r\n          exact\r\n          path=\"/app\"\r\n          render={() => <Redirect to=\"/app/contacts\" />}\r\n        />\r\n        <PrivateRoute path=\"/app\" component={Layout} />\r\n        <PrivateRoute path=\"/app/calls\" component={Calls} />\r\n        <PrivateRoute path=\"/app/call/:id\" component={ReceiveCall} />\r\n        <PrivateRoute path=\"/app/call2/:id\" component={DailCall} />\r\n        <PrivateRoute path=\"/app/messages\" component={Messages} />\r\n        <PrivateRoute path=\"/app/contacts\" component={Contacts} />\r\n        <PublicRoute path=\"/login\" component={Login} />\r\n        <PublicRoute path=\"/signup\" component={SignUp} />\r\n        <Route component={Error} />\r\n      </Switch>\r\n    </BrowserRouter>\r\n  );\r\n\r\n  function PrivateRoute({ component, ...rest }) {\r\n    return (\r\n      <Route\r\n        {...rest}\r\n        render={(props) =>\r\n          isAuthenticated ? (\r\n            React.createElement(component, props)\r\n          ) : (\r\n            <Redirect\r\n              to={{\r\n                pathname: \"/login\",\r\n                state: {\r\n                  from: props.location,\r\n                },\r\n              }}\r\n            />\r\n          )\r\n        }\r\n      />\r\n    );\r\n  }\r\n\r\n  function PublicRoute({ component, ...rest }) {\r\n    return (\r\n      <Route\r\n        {...rest}\r\n        render={(props) =>\r\n          isAuthenticated ? (\r\n            <Redirect\r\n              to={{\r\n                pathname: \"/\",\r\n              }}\r\n            />\r\n          ) : (\r\n            React.createElement(component, props)\r\n          )\r\n        }\r\n      />\r\n    );\r\n  }\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import tinycolor from \"tinycolor2\";\r\n\r\nconst primary = \"#536DFE\";\r\nconst secondary = \"#FF5C93\";\r\nconst warning = \"#FFC260\";\r\nconst success = \"#3CD4A0\";\r\nconst info = \"#9013FE\";\r\n\r\nconst lightenRate = 7.5;\r\nconst darkenRate = 15;\r\n\r\nexport default {\r\n  palette: {\r\n    primary: {\r\n      main: \"#040e46\",\r\n      light: tinycolor(primary).lighten(lightenRate).toHexString(),\r\n      dark: tinycolor(primary).darken(darkenRate).toHexString(),\r\n    },\r\n    secondary: {\r\n      main: secondary,\r\n      light: tinycolor(secondary).lighten(lightenRate).toHexString(),\r\n      dark: tinycolor(secondary).darken(darkenRate).toHexString(),\r\n      contrastText: \"#FFFFFF\",\r\n    },\r\n    warning: {\r\n      main: warning,\r\n      light: tinycolor(warning).lighten(lightenRate).toHexString(),\r\n      dark: tinycolor(warning).darken(darkenRate).toHexString(),\r\n    },\r\n    success: {\r\n      main: success,\r\n      light: tinycolor(success).lighten(lightenRate).toHexString(),\r\n      dark: tinycolor(success).darken(darkenRate).toHexString(),\r\n    },\r\n    info: {\r\n      main: info,\r\n      light: tinycolor(info).lighten(lightenRate).toHexString(),\r\n      dark: tinycolor(info).darken(darkenRate).toHexString(),\r\n    },\r\n    text: {\r\n      primary: \"#4A4A4A\",\r\n      secondary: \"#6E6E6E\",\r\n      hint: \"#B9B9B9\",\r\n    },\r\n    background: {\r\n      default: \"#F6F7FF\",\r\n      light: \"#F3F5FF\",\r\n    },\r\n  },\r\n  customShadows: {\r\n    widget:\r\n      \"0px 3px 11px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A\",\r\n    widgetDark:\r\n      \"0px 3px 18px 0px #4558A3B3, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A\",\r\n    widgetWide:\r\n      \"0px 12px 33px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A\",\r\n  },\r\n  overrides: {\r\n    MuiBackdrop: {\r\n      root: {\r\n        backgroundColor: \"#4A4A4A1A\",\r\n      },\r\n    },\r\n    MuiMenu: {\r\n      paper: {\r\n        boxShadow:\r\n          \"0px 3px 11px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A\",\r\n      },\r\n    },\r\n    MuiSelect: {\r\n      icon: {\r\n        color: \"#B9B9B9\",\r\n      },\r\n    },\r\n    MuiListItem: {\r\n      root: {\r\n        \"&$selected\": {\r\n          backgroundColor: \"#F3F5FF !important\",\r\n          \"&:focus\": {\r\n            backgroundColor: \"#F3F5FF\",\r\n          },\r\n        },\r\n      },\r\n      button: {\r\n        \"&:hover, &:focus\": {\r\n          backgroundColor: \"#F3F5FF\",\r\n        },\r\n      },\r\n    },\r\n    MuiTouchRipple: {\r\n      child: {\r\n        backgroundColor: \"white\",\r\n      },\r\n    },\r\n    MuiTableRow: {\r\n      root: {\r\n        height: 56,\r\n      },\r\n    },\r\n    MuiTableCell: {\r\n      root: {\r\n        borderBottom: \"1px solid rgba(224, 224, 224, .5)\",\r\n      },\r\n      head: {\r\n        fontSize: \"0.95rem\",\r\n      },\r\n      body: {\r\n        fontSize: \"0.95rem\",\r\n      },\r\n    },\r\n  },\r\n};\r\n","import { createMuiTheme } from \"@material-ui/core\";\r\nimport defaultTheme from \"./default\";\r\n\r\nconst overrides = {\r\n  typography: {\r\n    h1: {\r\n      fontSize: \"3rem\",\r\n    },\r\n    h2: {\r\n      fontSize: \"2rem\",\r\n    },\r\n    h3: {\r\n      fontSize: \"1.64rem\",\r\n    },\r\n    h4: {\r\n      fontSize: \"1.5rem\",\r\n    },\r\n    h5: {\r\n      fontSize: \"1.285rem\",\r\n    },\r\n    h6: {\r\n      fontSize: \"1.142rem\",\r\n    },\r\n  },\r\n};\r\n\r\nexport default {\r\n  default: createMuiTheme({ ...defaultTheme, ...overrides }),\r\n};\r\n","import { CssBaseline } from \"@material-ui/core\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport { LayoutProvider } from \"./context/LayoutContext\";\nimport { UserProvider } from \"./context/UserContext\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport Themes from \"./themes\";\n\nReactDOM.render(\n  <LayoutProvider>\n    <UserProvider>\n      <ThemeProvider theme={Themes.default}>\n        <CssBaseline />\n        <App />\n      </ThemeProvider>\n    </UserProvider>\n  </LayoutProvider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}