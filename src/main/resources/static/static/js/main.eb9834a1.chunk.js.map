{"version":3,"sources":["../node_modules/peerjs/dist sync","context/UserContext.js","pages/calls/Calls.js","components/Utils.js","pages/calls/DailCall.js","pages/calls/ReceiveCall.js","pages/contacts/Contacts.js","pages/messages/Messages.js","context/LayoutContext.js","components/header/styles.js","components/header/Header.js","components/sidebar/styles.js","components/sidebar/SidebarLink.js","components/sidebar/Sidebar.js","components/layout/CallModal.js","components/layout/styles.js","components/layout/Layout.js","components/Login.js","components/Signup.js","components/App.js","serviceWorker.js","themes/default.js","themes/index.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","UserStateContext","React","createContext","UserDispatchContext","userReducer","state","action","type","isAuthenticated","UserProvider","children","useReducer","localStorage","getItem","dispatch","Provider","value","useUserDispatch","context","useContext","undefined","Calls","socket","socketIOClient","peers","videoGrid","document","getElementById","addVideoStream","video","stream","srcObject","addEventListener","play","append","TextField","label","variant","IconButton","color","aria-label","component","onClick","preventDefault","peer","Peer","port","secure","host","myVideo","createElement","muted","navigator","mediaDevices","getUserMedia","audio","then","on","call","answer","userVideoStream","console","log","userId","remove","connectToNewUser","close","emit","useAudio","url","useState","Audio","playing","setPlaying","useEffect","pause","removeEventListener","useStyles","makeStyles","theme","appBar","top","bottom","grow","float","position","right","controlBtn","margin","callEndBtn","backgroundColor","DailCall","params","useParams","history","useHistory","callId","classes","setStream","setAudio","setVideo","user","JSON","parse","_id","from","fetch","method","headers","Accept","Response","json","response","userStream","setAttribute","loadMedia","getElementsByClassName","AppBar","className","Toolbar","val","getVideoTracks","enabled","edge","getAudioTracks","getTracks","forEach","track","stop","push","src","ReceiveCall","setTimeout","destinationStream","root","flexGrow","maxWidth","demo","palette","background","paper","title","spacing","backdrop","zIndex","drawer","Contacts","dense","data","setData","loading","setLoading","users","getContacts","List","length","map","firstName","lastName","email","ListItem","key","ListItemAvatar","Avatar","Message","ListItemText","primary","secondary","ListItemSecondaryAction","VideoCall","Backdrop","open","CircularProgress","Messages","LayoutStateContext","LayoutDispatchContext","layoutReducer","isSidebarOpened","LayoutProvider","useLayoutState","useLayoutDispatch","toggleSidebar","menuButton","marginRight","logotype","marginLeft","fontWeight","fontSize","whiteSpace","breakpoints","down","display","width","transition","transitions","create","easing","sharp","duration","leavingScreen","paddingLeft","paddingRight","padding","Header","props","layoutState","layoutDispatch","anchorEl","setAnchorEl","Boolean","handleClose","toolbar","classNames","headerMenuButton","headerMenuButtonCollapse","ArrowBack","headerIcon","headerIconCollapse","Typography","noWrap","aria-controls","aria-haspopup","event","currentTarget","Menu","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","onClose","MenuItem","removeItem","signOut","hide","flexShrink","drawerOpen","enteringScreen","drawerClose","overflowX","mixins","content","mobileBackButton","marginTop","only","up","SidebarLink","link","icon","location","nested","isOpen","setIsOpen","isLinkActive","pathname","indexOf","classnames","linkText","sectionTitle","linkTextHidden","Divider","divider","button","Link","to","disableRipple","ListItemIcon","linkIcon","linkIconActive","Inbox","linkTextActive","Collapse","in","timeout","unmountOnExit","nestedList","disablePadding","childrenLink","linkRoot","linkActive","linkNested","structure","withRouter","useTheme","isPermanent","setPermanent","window","handleWindowWidthChange","Drawer","sidebarList","isSmallScreen","innerWidth","values","md","rand","Math","round","random","getModalStyle","left","transform","border","boxShadow","shadows","callEnd","callAnswer","callImg","justifyContent","textAlign","height","borderRadius","callText","callName","CallModal","toggle","modalStyle","setOpen","setUser","status","body","stringify","getUserById","style","slice","toUpperCase","Modal","aria-labelledby","aria-describedby","minHeight","contentShift","fakeToolbar","loop","io","setCallId","toId","path","Copyright","align","href","Date","getFullYear","flexDirection","alignItems","avatar","main","form","submit","SignIn","userDispatch","setIsLoading","setError","password","setValues","handleInputChange","target","name","Container","CssBaseline","noValidate","required","fullWidth","onChange","autoComplete","autoFocus","FormControlLabel","control","Checkbox","Button","login","setItem","loginUser","Grid","container","item","xs","Box","mt","SignUp","sm","alert","justify","App","useUserState","exact","render","PrivateRoute","Layout","PublicRoute","Login","rest","hostname","match","light","tinycolor","lighten","toHexString","dark","darken","contrastText","warning","success","info","text","hint","default","customShadows","widget","widgetDark","widgetWide","overrides","MuiBackdrop","MuiMenu","MuiSelect","MuiListItem","MuiTouchRipple","child","MuiTableRow","MuiTableCell","borderBottom","head","createMuiTheme","defaultTheme","typography","h1","h2","h3","h4","h5","h6","ReactDOM","ThemeProvider","Themes","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.eb9834a1.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 145;","import React from \"react\";\r\n\r\nvar UserStateContext = React.createContext();\r\nvar UserDispatchContext = React.createContext();\r\n\r\nfunction userReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"LOGIN_SUCCESS\":\r\n      return { ...state, isAuthenticated: true };\r\n    case \"SIGN_OUT_SUCCESS\":\r\n      return { ...state, isAuthenticated: false };\r\n    default: {\r\n      throw new Error(`Unhandled action type: ${action.type}`);\r\n    }\r\n  }\r\n}\r\n\r\nfunction UserProvider({ children }) {\r\n  var [state, dispatch] = React.useReducer(userReducer, {\r\n    isAuthenticated: !!localStorage.getItem(\"user\"),\r\n  });\r\n\r\n  return (\r\n    <UserStateContext.Provider value={state}>\r\n      <UserDispatchContext.Provider value={dispatch}>\r\n        {children}\r\n      </UserDispatchContext.Provider>\r\n    </UserStateContext.Provider>\r\n  );\r\n}\r\n\r\nfunction useUserState() {\r\n  var context = React.useContext(UserStateContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useUserState must be used within a UserProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nfunction useUserDispatch() {\r\n  var context = React.useContext(UserDispatchContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useUserDispatch must be used within a UserProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nfunction loginUser(dispatch, login, password, history, setIsLoading, setError) {\r\n  setError(false);\r\n  setIsLoading(true);\r\n\r\n  if (!!login && !!password) {\r\n    fetch(\"https://teachit-api.herokuapp.com/teachit/api/v1/user/query\", {\r\n      method: \"post\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ email: login }),\r\n    })\r\n      .then((Response) => Response.json())\r\n      .then((response) => {\r\n        if (response) {\r\n          localStorage.setItem(\"user\", JSON.stringify(response[0]));\r\n          setError(null);\r\n          setIsLoading(false);\r\n          dispatch({ type: \"LOGIN_SUCCESS\" });\r\n\r\n          history.push(\"/app/calls\");\r\n        } else {\r\n          console.log(\"unable to inser\");\r\n        }\r\n      });\r\n  } else {\r\n    dispatch({ type: \"LOGIN_FAILURE\" });\r\n    setError(true);\r\n    setIsLoading(false);\r\n  }\r\n}\r\n\r\nfunction createUser(dispatch, data, history) {\r\n  fetch(\"https://teachit-api.herokuapp.com/teachit/api/v1/user\", {\r\n    method: \"post\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(data),\r\n  })\r\n    .then((Response) => Response.json())\r\n    .then((response) => {\r\n      if (response.user) {\r\n        localStorage.setItem(\"user\", JSON.stringify(response.user));\r\n        dispatch({ type: \"LOGIN_SUCCESS\" });\r\n        history.push(\"/app/calls\");\r\n      } else {\r\n        console.log(\"unable to inser\");\r\n      }\r\n    });\r\n}\r\n\r\nfunction getContacts(setData, setLoading) {\r\n  setLoading(true);\r\n  fetch(\"https://teachit-api.herokuapp.com/teachit/api/v1/user\", {\r\n    method: \"get\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  })\r\n    .then((Response) => Response.json())\r\n    .then((response) => {\r\n      if (response) {\r\n        setData(response.users);\r\n        setLoading(false);\r\n      } else {\r\n        console.log(\"unable to inser\");\r\n        setLoading(false);\r\n      }\r\n    });\r\n}\r\n\r\nfunction getUserById(id, setUser) {\r\n  fetch(\"https://teachit-api.herokuapp.com/teachit/api/v1/user/query\", {\r\n    method: \"post\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ _id: id }),\r\n  })\r\n    .then((Response) => Response.json())\r\n    .then((response) => {\r\n      if (response) {\r\n        debugger;\r\n        setUser(response[0]);\r\n      } else {\r\n        console.log(\"unable to inser\");\r\n      }\r\n    });\r\n}\r\n\r\nfunction signOut(dispatch, history) {\r\n  localStorage.removeItem(\"user\");\r\n  dispatch({ type: \"SIGN_OUT_SUCCESS\" });\r\n  history.push(\"/login\");\r\n}\r\n\r\nexport {\r\n  UserProvider,\r\n  useUserState,\r\n  useUserDispatch,\r\n  createUser,\r\n  loginUser,\r\n  getContacts,\r\n  signOut,\r\n  getUserById,\r\n};\r\n","import { TextField } from \"@material-ui/core\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CallIcon from \"@material-ui/icons/Call\";\r\nimport Peer from \"peerjs\";\r\nimport React from \"react\";\r\nimport socketIOClient from \"socket.io-client\";\r\n\r\nconst ENDPOINT = \"https://call2friend.herokuapp.com\";\r\n\r\nexport default function Calls() {\r\n  const socket = socketIOClient(ENDPOINT);\r\n  const peers = {};\r\n  let videoGrid = document.getElementById(\"video-grid\");\r\n  function handleClick(e) {\r\n    debugger;\r\n    e.preventDefault();\r\n    var myStream;\r\n    videoGrid = document.getElementById(\"video-grid\");\r\n    const peer = new Peer(undefined, {\r\n      port: \"443\",\r\n      secure: true,\r\n      host: \"school-peer.herokuapp.com\",\r\n    });\r\n    const myVideo = document.createElement(\"video\");\r\n    myVideo.muted = true;\r\n    navigator.mediaDevices\r\n      .getUserMedia({\r\n        video: true,\r\n        audio: true,\r\n      })\r\n      .then((stream) => {\r\n        myStream = stream;\r\n        addVideoStream(myVideo, stream);\r\n\r\n        peer.on(\"call\", (call) => {\r\n          call.answer(stream);\r\n          const video = document.createElement(\"video\");\r\n          call.on(\"stream\", (userVideoStream) => {\r\n            console.log(\"Client video Adding\");\r\n            addVideoStream(video, userVideoStream);\r\n          });\r\n        });\r\n        socket.on(\"user-connected\", (userId) => {\r\n          connectToNewUser(userId, stream);\r\n        });\r\n      });\r\n\r\n    socket.on(\"user-disconnected\", (userId) => {\r\n      if (peers[userId]) peers[userId].close();\r\n    });\r\n    peer.on(\"open\", (id) => {\r\n      socket.emit(\"join-room\", 10, id);\r\n    });\r\n\r\n    function connectToNewUser(userId, stream) {\r\n      const call = peer.call(userId, stream);\r\n      const video = document.createElement(\"video\");\r\n      call.on(\"stream\", (userVideoStream) => {\r\n        addVideoStream(video, userVideoStream);\r\n      });\r\n      call.on(\"close\", () => {\r\n        video.remove();\r\n      });\r\n\r\n      peers[userId] = call;\r\n    }\r\n  }\r\n\r\n  function addVideoStream(video, stream) {\r\n    video.srcObject = stream;\r\n    video.addEventListener(\"loadedmetadata\", () => {\r\n      video.play();\r\n    });\r\n    videoGrid.append(video);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <TextField id=\"outlined-basic\" label=\"Number\" variant=\"outlined\" />\r\n      <IconButton\r\n        color=\"primary\"\r\n        aria-label=\"upload picture\"\r\n        component=\"span\"\r\n        onClick={handleClick}\r\n      >\r\n        <CallIcon />\r\n      </IconButton>\r\n\r\n      <div id=\"video-grid\"></div>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState } from \"react\";\r\n\r\nconst useAudio = (url) => {\r\n  const [audio] = useState(new Audio(url));\r\n  const [playing, setPlaying] = useState(false);\r\n\r\n  const toggle = () => setPlaying(!playing);\r\n\r\n  useEffect(() => {\r\n    playing ? audio.play() : audio.pause();\r\n  }, [playing]);\r\n\r\n  useEffect(() => {\r\n    audio.addEventListener(\"ended\", () => {\r\n      debugger;\r\n      setPlaying(true);\r\n    });\r\n    return () => {\r\n      audio.removeEventListener(\"ended\", () => setPlaying(false));\r\n    };\r\n  }, []);\r\n\r\n  return [playing, toggle];\r\n};\r\n\r\nexport default useAudio;\r\n","import { AppBar, IconButton, makeStyles, Toolbar } from \"@material-ui/core\";\r\nimport CallEndIcon from \"@material-ui/icons/CallEnd\";\r\nimport MicIcon from \"@material-ui/icons/Mic\";\r\nimport MicOffIcon from \"@material-ui/icons/MicOff\";\r\nimport VideocamIcon from \"@material-ui/icons/Videocam\";\r\nimport VideocamOffIcon from \"@material-ui/icons/VideocamOff\";\r\nimport Peer from \"peerjs\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport socketIOClient from \"socket.io-client\";\r\nimport useAudio from \"../../components/Utils\";\r\nconst ENDPOINT = \"https://call2friend.herokuapp.com\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    top: \"auto\",\r\n    bottom: 0,\r\n  },\r\n  grow: {\r\n    float: \"right\",\r\n    position: \"absolute\",\r\n    right: \"30px\",\r\n  },\r\n  controlBtn: {\r\n    margin: \"5px\",\r\n  },\r\n  callEndBtn: {\r\n    margin: \"5px\",\r\n    backgroundColor: \"red\",\r\n  },\r\n}));\r\n\r\nexport default function DailCall() {\r\n  const socket = socketIOClient(ENDPOINT);\r\n  const [playing, toggle] = useAudio(\"telephone_ring.mp3\");\r\n  const params = useParams();\r\n  const history = useHistory();\r\n  const callId = params.id;\r\n  const classes = useStyles();\r\n  const [stream, setStream] = useState();\r\n  const [audio, setAudio] = useState(true);\r\n  const [control, setControl] = useState(false);\r\n  const [video, setVideo] = useState(true);\r\n  const [userId, setUserID] = useState(0);\r\n  let videoGrid;\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n  const peer = new Peer(user._id, {\r\n    port: \"443\",\r\n    secure: true,\r\n    host: \"school-peer.herokuapp.com\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    videoGrid = document.getElementById(\"video-grid\");\r\n    callUser(user._id, callId);\r\n    loadMedia();\r\n    play();\r\n  }, [userId]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      console.log(\"End\");\r\n    };\r\n  }, []);\r\n\r\n  function switchVideo(val) {\r\n    setVideo(val);\r\n    stream.getVideoTracks()[0].enabled = val;\r\n  }\r\n\r\n  function switchAudio(val) {\r\n    setAudio(val);\r\n    stream.getAudioTracks()[0].enabled = val;\r\n  }\r\n\r\n  function callEnd() {\r\n    stream.getTracks().forEach(function (track) {\r\n      track.stop();\r\n    });\r\n    history.push(\"/app/contacts\");\r\n  }\r\n  function play() {\r\n    const audioEl = document.getElementsByClassName(\"audio-element\")[0];\r\n    audioEl.play();\r\n  }\r\n\r\n  function callUser(from, to) {\r\n    fetch(\r\n      \"http://teachit-api.herokuapp.com/teachit/api/v1/user/\" + to + \"/\" + from,\r\n      {\r\n        method: \"get\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    )\r\n      .then((Response) => Response.json())\r\n      .then((response) => {\r\n        if (response) {\r\n          console.log(response);\r\n        } else {\r\n          console.log(\"unable to inser\");\r\n        }\r\n      });\r\n  }\r\n\r\n  function loadMedia() {\r\n    const myVideo = document.createElement(\"video\");\r\n    myVideo.muted = true;\r\n    navigator.mediaDevices\r\n      .getUserMedia({\r\n        video: true,\r\n        audio: true,\r\n      })\r\n      .then((stream) => {\r\n        debugger;\r\n        setStream(stream);\r\n        addVideoStream(myVideo, stream);\r\n        peer.on(\"call\", function (call) {\r\n          console.log(\"Received the call from client\");\r\n          call.answer(stream);\r\n          call.on(\"stream\", function (userStream) {\r\n            console.log(\"Add the client stream\");\r\n            if (!document.getElementById(callId)) {\r\n              const myVideo = document.createElement(\"video\");\r\n              myVideo.setAttribute(\"id\", callId);\r\n              addVideoStream(myVideo, userStream);\r\n            }\r\n          });\r\n        });\r\n      });\r\n  }\r\n\r\n  function addVideoStream(video, stream) {\r\n    video.srcObject = stream;\r\n    video.addEventListener(\"loadedmetadata\", () => {\r\n      video.play();\r\n    });\r\n    videoGrid.append(video);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div id=\"video-grid\"></div>\r\n      <AppBar position=\"fixed\" color=\"primary\" className={classes.appBar}>\r\n        <Toolbar>\r\n          <div className={classes.grow}>\r\n            <IconButton\r\n              color=\"inherit\"\r\n              onClick={() => switchVideo(!video)}\r\n              edge=\"end\"\r\n              className={classes.controlBtn}\r\n            >\r\n              {video ? <VideocamIcon /> : <VideocamOffIcon />}\r\n            </IconButton>\r\n            <IconButton\r\n              edge=\"end\"\r\n              color=\"inherit\"\r\n              onClick={() => switchAudio(!audio)}\r\n              className={classes.controlBtn}\r\n            >\r\n              {audio ? <MicIcon /> : <MicOffIcon />}\r\n            </IconButton>\r\n            <IconButton\r\n              color=\"inherit\"\r\n              onClick={() => callEnd()}\r\n              edge=\"end\"\r\n              className={classes.callEndBtn}\r\n            >\r\n              <CallEndIcon />\r\n            </IconButton>\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <audio className=\"audio-element\">\r\n        <source src=\"sample.mp3\"></source>\r\n      </audio>\r\n    </div>\r\n  );\r\n}\r\n","import { AppBar, IconButton, makeStyles, Toolbar } from \"@material-ui/core\";\r\nimport CallEndIcon from \"@material-ui/icons/CallEnd\";\r\nimport MicIcon from \"@material-ui/icons/Mic\";\r\nimport MicOffIcon from \"@material-ui/icons/MicOff\";\r\nimport VideocamIcon from \"@material-ui/icons/Videocam\";\r\nimport VideocamOffIcon from \"@material-ui/icons/VideocamOff\";\r\nimport Peer from \"peerjs\";\r\nimport React, { useState } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport socketIOClient from \"socket.io-client\";\r\nconst ENDPOINT = \"https://call2friend.herokuapp.com\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    top: \"auto\",\r\n    bottom: 0,\r\n  },\r\n  grow: {\r\n    float: \"right\",\r\n    position: \"absolute\",\r\n    right: \"30px\",\r\n  },\r\n  controlBtn: {\r\n    margin: \"5px\",\r\n  },\r\n  callEndBtn: {\r\n    margin: \"5px\",\r\n    backgroundColor: \"red\",\r\n  },\r\n}));\r\n\r\nexport default function ReceiveCall() {\r\n  const socket = socketIOClient(ENDPOINT);\r\n  const history = useHistory();\r\n  const params = useParams();\r\n  const callId = params.id;\r\n  const classes = useStyles();\r\n  const [stream, setStream] = useState();\r\n  const [audio, setAudio] = useState(true);\r\n  const [control, setControl] = useState(false);\r\n  const [video, setVideo] = useState(true);\r\n  const [userId, setUserID] = useState(0);\r\n  let videoGrid;\r\n  let myStream;\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n  const peer = new Peer(user._id, {\r\n    port: \"443\",\r\n    secure: true,\r\n    host: \"school-peer.herokuapp.com\",\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    videoGrid = document.getElementById(\"video-grid\");\r\n    debugger;\r\n    console.log(\"hai\");\r\n    loadMedia();\r\n  }, [userId]);\r\n  // const peers = {};\r\n\r\n  function switchVideo(val) {\r\n    setVideo(val);\r\n    stream.getVideoTracks()[0].enabled = val;\r\n  }\r\n  function switchAudio(val) {\r\n    setAudio(val);\r\n    stream.getAudioTracks()[0].enabled = val;\r\n  }\r\n\r\n  function callEnd() {\r\n    stream.getTracks().forEach(function (track) {\r\n      track.stop();\r\n    });\r\n    history.push(\"/app/contacts\");\r\n  }\r\n  function loadMedia() {\r\n    const myVideo = document.createElement(\"video\");\r\n    myVideo.muted = true;\r\n    navigator.mediaDevices\r\n      .getUserMedia({\r\n        video: true,\r\n        audio: true,\r\n      })\r\n      .then((stream) => {\r\n        // setControl(true);\r\n        console.log(\"Calling\");\r\n        setStream(stream);\r\n        addVideoStream(myVideo, stream);\r\n        setTimeout(() => {\r\n          var call = peer.call(callId, stream);\r\n          debugger;\r\n          if (call)\r\n            call.on(\"stream\", function (destinationStream) {\r\n              console.log(\"Accepted the call\");\r\n              if (!document.getElementById(callId)) {\r\n                const myVideo = document.createElement(\"video\");\r\n                myVideo.setAttribute(\"id\", callId);\r\n                addVideoStream(myVideo, destinationStream);\r\n              }\r\n            });\r\n        }, 2000);\r\n      });\r\n  }\r\n\r\n  function addVideoStream(video, stream) {\r\n    video.srcObject = stream;\r\n    video.addEventListener(\"loadedmetadata\", () => {\r\n      video.play();\r\n    });\r\n    videoGrid.append(video);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div id=\"video-grid\"></div>\r\n      <AppBar position=\"fixed\" color=\"primary\" className={classes.appBar}>\r\n        <Toolbar>\r\n          <div className={classes.grow}>\r\n            <IconButton\r\n              color=\"inherit\"\r\n              onClick={() => switchVideo(!video)}\r\n              edge=\"end\"\r\n              className={classes.controlBtn}\r\n            >\r\n              {video ? <VideocamIcon /> : <VideocamOffIcon />}\r\n            </IconButton>\r\n            <IconButton\r\n              edge=\"end\"\r\n              color=\"inherit\"\r\n              onClick={() => switchAudio(!audio)}\r\n              className={classes.controlBtn}\r\n            >\r\n              {audio ? <MicIcon /> : <MicOffIcon />}\r\n            </IconButton>\r\n            <IconButton\r\n              color=\"inherit\"\r\n              onClick={() => callEnd()}\r\n              edge=\"end\"\r\n              className={classes.callEndBtn}\r\n            >\r\n              <CallEndIcon />\r\n            </IconButton>\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n}\r\n","import {\r\n  Avatar,\r\n  Backdrop,\r\n  CircularProgress,\r\n  IconButton,\r\n  List,\r\n  ListItem,\r\n  ListItemAvatar,\r\n  ListItemSecondaryAction,\r\n  ListItemText,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\nimport { Call, Message, VideoCall } from \"@material-ui/icons\";\r\nimport React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { getContacts } from \"../../context/UserContext\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    maxWidth: 752,\r\n  },\r\n  demo: {\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  title: {\r\n    margin: theme.spacing(4, 0, 2),\r\n  },\r\n  appBar: {\r\n    top: \"auto\",\r\n    bottom: 0,\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nexport default function Contacts() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const [dense, setDense] = React.useState(false);\r\n  const [data, setData] = React.useState([]);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [userId, setUserID] = React.useState(0);\r\n  let user = JSON.parse(localStorage.getItem(\"user\"));\r\n  React.useEffect(() => {\r\n    getContacts(setData, setLoading);\r\n  }, [userId]);\r\n\r\n  function call(id) {\r\n    history.push(\"/app/call2/\" + id);\r\n  }\r\n  const handleClose = () => {\r\n    // setLoading(false);\r\n  };\r\n  return (\r\n    <>\r\n      <h1>Contacts</h1>\r\n      <div className={classes.demo}>\r\n        <List dense={dense}>\r\n          {data.length > 0\r\n            ? data.map(({ firstName, lastName, email, _id }) => (\r\n                <ListItem key={_id}>\r\n                  <ListItemAvatar>\r\n                    <Avatar>\r\n                      <Message />\r\n                    </Avatar>\r\n                  </ListItemAvatar>\r\n                  <ListItemText\r\n                    primary={firstName + \" \" + lastName}\r\n                    secondary={email}\r\n                  />\r\n                  <ListItemSecondaryAction>\r\n                    <IconButton\r\n                      edge=\"end\"\r\n                      aria-label=\"audio\"\r\n                      onClick={() => call(_id)}\r\n                    >\r\n                      <Call />\r\n                    </IconButton>\r\n                    <IconButton edge=\"end\" aria-label=\"video\">\r\n                      <VideoCall />\r\n                    </IconButton>\r\n                  </ListItemSecondaryAction>\r\n                </ListItem>\r\n              ))\r\n            : []}\r\n        </List>\r\n      </div>\r\n      <Backdrop\r\n        className={classes.backdrop}\r\n        open={loading}\r\n        onClick={handleClose}\r\n      >\r\n        <CircularProgress />\r\n      </Backdrop>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Messages() {\r\n  return (\r\n    <>\r\n      <h1>Messages</h1>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nvar LayoutStateContext = React.createContext();\r\nvar LayoutDispatchContext = React.createContext();\r\n\r\nfunction layoutReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"TOGGLE_SIDEBAR\":\r\n      return { ...state, isSidebarOpened: !state.isSidebarOpened };\r\n    default: {\r\n      throw new Error(`Unhandled action type: ${action.type}`);\r\n    }\r\n  }\r\n}\r\n\r\nfunction LayoutProvider({ children }) {\r\n  var [state, dispatch] = React.useReducer(layoutReducer, {\r\n    isSidebarOpened: false,\r\n  });\r\n  return (\r\n    <LayoutStateContext.Provider value={state}>\r\n      <LayoutDispatchContext.Provider value={dispatch}>\r\n        {children}\r\n      </LayoutDispatchContext.Provider>\r\n    </LayoutStateContext.Provider>\r\n  );\r\n}\r\n\r\nfunction useLayoutState() {\r\n  var context = React.useContext(LayoutStateContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useLayoutState must be used within a LayoutProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nfunction useLayoutDispatch() {\r\n  var context = React.useContext(LayoutDispatchContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useLayoutDispatch must be used within a LayoutProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport { LayoutProvider, useLayoutState, useLayoutDispatch, toggleSidebar };\r\n\r\n// ###########################################################\r\nfunction toggleSidebar(dispatch) {\r\n  dispatch({\r\n    type: \"TOGGLE_SIDEBAR\",\r\n  });\r\n}\r\n","import { makeStyles } from \"@material-ui/styles\";\r\n\r\nexport default makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n  logotype: {\r\n    color: \"white\",\r\n    marginLeft: theme.spacing(2.5),\r\n    marginRight: theme.spacing(2.5),\r\n    fontWeight: 500,\r\n    fontSize: 18,\r\n    whiteSpace: \"nowrap\",\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n  appBar: {\r\n    width: \"100vw\",\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create([\"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  toolbar: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(2),\r\n  },\r\n  hide: {\r\n    display: \"none\",\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  headerMenuButton: {\r\n    marginLeft: theme.spacing(2),\r\n    padding: theme.spacing(0.5),\r\n  },\r\n  headerMenuButtonCollapse: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  headerIcon: {\r\n    fontSize: 28,\r\n    color: \"rgba(255, 255, 255, 0.35)\",\r\n  },\r\n  headerIconCollapse: {\r\n    color: \"white\",\r\n  },\r\n}));\r\n","import { AppBar, IconButton, Toolbar, Typography } from \"@material-ui/core\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport {\r\n  ArrowBack as ArrowBackIcon,\r\n  Menu as MenuIcon,\r\n} from \"@material-ui/icons\";\r\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\r\nimport classNames from \"classnames\";\r\nimport React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n// context\r\nimport {\r\n  toggleSidebar,\r\n  useLayoutDispatch,\r\n  useLayoutState,\r\n} from \"../../context/LayoutContext\";\r\nimport { signOut, useUserDispatch } from \"../../context/UserContext\";\r\n// styles\r\nimport useStyles from \"./styles\";\r\n\r\nexport default function Header(props) {\r\n  var classes = useStyles();\r\n  var dispatch = useUserDispatch();\r\n  const history = useHistory();\r\n\r\n  // global\r\n  var layoutState = useLayoutState();\r\n  var layoutDispatch = useLayoutDispatch();\r\n  const [auth, setAuth] = React.useState(true);\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const open = Boolean(anchorEl);\r\n\r\n  const handleChange = (event) => {\r\n    setAuth(event.target.checked);\r\n  };\r\n\r\n  const handleMenu = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const logOut = () => {\r\n    signOut(dispatch, history);\r\n  };\r\n\r\n  // local\r\n  var [isSearchOpen, setSearchOpen] = useState(false);\r\n\r\n  return (\r\n    <AppBar position=\"fixed\" className={classes.appBar}>\r\n      <Toolbar className={classes.toolbar} variant=\"dense\">\r\n        <IconButton\r\n          color=\"inherit\"\r\n          onClick={() => toggleSidebar(layoutDispatch)}\r\n          className={classNames(\r\n            classes.headerMenuButton,\r\n            classes.headerMenuButtonCollapse\r\n          )}\r\n        >\r\n          {layoutState.isSidebarOpened ? (\r\n            <ArrowBackIcon\r\n              classes={{\r\n                root: classNames(\r\n                  classes.headerIcon,\r\n                  classes.headerIconCollapse\r\n                ),\r\n              }}\r\n            />\r\n          ) : (\r\n            <MenuIcon\r\n              classes={{\r\n                root: classNames(\r\n                  classes.headerIcon,\r\n                  classes.headerIconCollapse\r\n                ),\r\n              }}\r\n            />\r\n          )}\r\n        </IconButton>\r\n        <Typography className={classes.title} variant=\"h6\" noWrap>\r\n          TeachIT\r\n        </Typography>\r\n\r\n        <div>\r\n          <IconButton\r\n            aria-label=\"account of current user\"\r\n            aria-controls=\"menu-appbar\"\r\n            aria-haspopup=\"true\"\r\n            onClick={handleMenu}\r\n            color=\"inherit\"\r\n          >\r\n            <AccountCircle />\r\n          </IconButton>\r\n          <Menu\r\n            id=\"menu-appbar\"\r\n            anchorEl={anchorEl}\r\n            anchorOrigin={{\r\n              vertical: \"top\",\r\n              horizontal: \"right\",\r\n            }}\r\n            keepMounted\r\n            transformOrigin={{\r\n              vertical: \"top\",\r\n              horizontal: \"right\",\r\n            }}\r\n            open={open}\r\n            onClose={handleClose}\r\n          >\r\n            <MenuItem onClick={handleClose}>Profile</MenuItem>\r\n            <MenuItem onClick={handleClose}>My account</MenuItem>\r\n            <MenuItem onClick={logOut}>Sign Out</MenuItem>\r\n          </Menu>\r\n        </div>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import { makeStyles } from \"@material-ui/styles\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nexport default makeStyles((theme) => ({\r\n  menuButton: {\r\n    marginLeft: 12,\r\n    marginRight: 36,\r\n  },\r\n  hide: {\r\n    display: \"none\",\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n    whiteSpace: \"nowrap\",\r\n  },\r\n  drawerOpen: {\r\n    width: drawerWidth,\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  drawerClose: {\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    overflowX: \"hidden\",\r\n    width: theme.spacing(7) + 0,\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      width: drawerWidth,\r\n    },\r\n  },\r\n  toolbar: {\r\n    ...theme.mixins.toolbar,\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n  },\r\n  /* sidebarList: {\r\n    marginTop: theme.spacing(6),\r\n  }, */\r\n  mobileBackButton: {\r\n    marginTop: theme.spacing(0.5),\r\n    marginLeft: theme.spacing(3),\r\n    [theme.breakpoints.only(\"sm\")]: {\r\n      marginTop: theme.spacing(0.625),\r\n    },\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n}));\r\n","import {\r\n  Collapse,\r\n  Divider,\r\n  List,\r\n  ListItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Inbox as InboxIcon } from \"@material-ui/icons\";\r\nimport classnames from \"classnames\";\r\nimport React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n// styles\r\nimport useStyles from \"./styles\";\r\n\r\nexport default function SidebarLink({\r\n  link,\r\n  icon,\r\n  label,\r\n  children,\r\n  location,\r\n  isSidebarOpened,\r\n  nested,\r\n  type,\r\n}) {\r\n  var classes = useStyles();\r\n\r\n  // local\r\n  var [isOpen, setIsOpen] = useState(false);\r\n  var isLinkActive =\r\n    link &&\r\n    (location.pathname === link || location.pathname.indexOf(link) !== -1);\r\n\r\n  if (type === \"title\")\r\n    return (\r\n      <Typography\r\n        className={classnames(classes.linkText, classes.sectionTitle, {\r\n          [classes.linkTextHidden]: !isSidebarOpened,\r\n        })}\r\n      >\r\n        {label}\r\n      </Typography>\r\n    );\r\n\r\n  if (type === \"divider\") return <Divider className={classes.divider} />;\r\n\r\n  if (!children)\r\n    return (\r\n      <ListItem\r\n        button\r\n        component={link && Link}\r\n        to={link}\r\n        className={classes.link}\r\n        classes={{\r\n          root: classnames(classes.linkRoot, {\r\n            [classes.linkActive]: isLinkActive && !nested,\r\n            [classes.linkNested]: nested,\r\n          }),\r\n        }}\r\n        disableRipple\r\n      >\r\n        <ListItemIcon\r\n          className={classnames(classes.linkIcon, {\r\n            [classes.linkIconActive]: isLinkActive,\r\n          })}\r\n        >\r\n          {nested ? icon : icon}\r\n        </ListItemIcon>\r\n        <ListItemText\r\n          classes={{\r\n            primary: classnames(classes.linkText, {\r\n              [classes.linkTextActive]: isLinkActive,\r\n              [classes.linkTextHidden]: !isSidebarOpened,\r\n            }),\r\n          }}\r\n          primary={label}\r\n        />\r\n      </ListItem>\r\n    );\r\n\r\n  return (\r\n    <>\r\n      <ListItem\r\n        button\r\n        component={link && Link}\r\n        onClick={toggleCollapse}\r\n        className={classes.link}\r\n        to={link}\r\n        disableRipple\r\n      >\r\n        <ListItemIcon\r\n          className={classnames(classes.linkIcon, {\r\n            [classes.linkIconActive]: isLinkActive,\r\n          })}\r\n        >\r\n          {icon ? icon : <InboxIcon />}\r\n        </ListItemIcon>\r\n        <ListItemText\r\n          classes={{\r\n            primary: classnames(classes.linkText, {\r\n              [classes.linkTextActive]: isLinkActive,\r\n              [classes.linkTextHidden]: !isSidebarOpened,\r\n            }),\r\n          }}\r\n          primary={label}\r\n        />\r\n      </ListItem>\r\n      {children && (\r\n        <Collapse\r\n          in={isOpen && isSidebarOpened}\r\n          timeout=\"auto\"\r\n          unmountOnExit\r\n          className={classes.nestedList}\r\n        >\r\n          <List component=\"div\" disablePadding>\r\n            {children.map((childrenLink) => (\r\n              <SidebarLink\r\n                key={childrenLink && childrenLink.link}\r\n                location={location}\r\n                isSidebarOpened={isSidebarOpened}\r\n                classes={classes}\r\n                nested\r\n                {...childrenLink}\r\n              />\r\n            ))}\r\n          </List>\r\n        </Collapse>\r\n      )}\r\n    </>\r\n  );\r\n\r\n  // ###########################################################\r\n\r\n  function toggleCollapse(e) {\r\n    if (isSidebarOpened) {\r\n      e.preventDefault();\r\n      setIsOpen(!isOpen);\r\n    }\r\n  }\r\n}\r\n","import { Drawer, IconButton, List } from \"@material-ui/core\";\r\nimport {\r\n  ArrowBack as ArrowBackIcon,\r\n  Call,\r\n  Contacts,\r\n  Message,\r\n} from \"@material-ui/icons\";\r\nimport { useTheme } from \"@material-ui/styles\";\r\nimport classNames from \"classnames\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\n// context\r\nimport {\r\n  toggleSidebar,\r\n  useLayoutDispatch,\r\n  useLayoutState,\r\n} from \"../../context/LayoutContext\";\r\n// components\r\nimport SidebarLink from \"./SidebarLink\";\r\n// styles\r\nimport useStyles from \"./styles\";\r\n\r\nconst structure = [\r\n  { id: 1, label: \"Calls\", link: \"/app/calls\", icon: <Call /> },\r\n  { id: 2, label: \"Messages\", link: \"/app/messages\", icon: <Message /> },\r\n  { id: 3, label: \"Contacts\", link: \"/app/contacts\", icon: <Contacts /> },\r\n];\r\n\r\nfunction Sidebar({ location }) {\r\n  var classes = useStyles();\r\n  var theme = useTheme();\r\n\r\n  // global\r\n  var { isSidebarOpened } = useLayoutState();\r\n  var layoutDispatch = useLayoutDispatch();\r\n\r\n  // local\r\n  var [isPermanent, setPermanent] = useState(true);\r\n\r\n  useEffect(function () {\r\n    window.addEventListener(\"resize\", handleWindowWidthChange);\r\n    handleWindowWidthChange();\r\n    return function cleanup() {\r\n      window.removeEventListener(\"resize\", handleWindowWidthChange);\r\n    };\r\n  });\r\n\r\n  return (\r\n    <Drawer\r\n      variant={isPermanent ? \"permanent\" : \"temporary\"}\r\n      className={classNames(classes.drawer, {\r\n        [classes.drawerOpen]: isSidebarOpened,\r\n        [classes.drawerClose]: !isSidebarOpened,\r\n      })}\r\n      classes={{\r\n        paper: classNames({\r\n          [classes.drawerOpen]: isSidebarOpened,\r\n          [classes.drawerClose]: !isSidebarOpened,\r\n        }),\r\n      }}\r\n      open={isSidebarOpened}\r\n    >\r\n      <div className={classes.toolbar} />\r\n      <div className={classes.mobileBackButton}>\r\n        <IconButton onClick={() => toggleSidebar(layoutDispatch)}>\r\n          <ArrowBackIcon\r\n            classes={{\r\n              root: classNames(classes.headerIcon, classes.headerIconCollapse),\r\n            }}\r\n          />\r\n        </IconButton>\r\n      </div>\r\n      <List className={classes.sidebarList}>\r\n        {structure.map((link) => (\r\n          <SidebarLink\r\n            key={link.id}\r\n            location={location}\r\n            isSidebarOpened={isSidebarOpened}\r\n            {...link}\r\n          />\r\n        ))}\r\n      </List>\r\n    </Drawer>\r\n  );\r\n\r\n  // ##################################################################\r\n  function handleWindowWidthChange() {\r\n    var windowWidth = window.innerWidth;\r\n    var breakpointWidth = theme.breakpoints.values.md;\r\n    var isSmallScreen = windowWidth < breakpointWidth;\r\n\r\n    if (isSmallScreen && isPermanent) {\r\n      setPermanent(false);\r\n    } else if (!isSmallScreen && !isPermanent) {\r\n      setPermanent(true);\r\n    }\r\n  }\r\n}\r\n\r\nexport default withRouter(Sidebar);\r\n","import { IconButton } from \"@material-ui/core\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport CallIcon from \"@material-ui/icons/Call\";\r\nimport CallEndIcon from \"@material-ui/icons/CallEnd\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { getUserById } from \"../../context/UserContext\";\r\n\r\nfunction rand() {\r\n  return Math.round(Math.random() * 20) - 10;\r\n}\r\n\r\nfunction getModalStyle() {\r\n  const top = 50 + rand();\r\n  const left = 50 + rand();\r\n\r\n  return {\r\n    top: `${top}%`,\r\n    left: `${left}%`,\r\n    transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    position: \"absolute\",\r\n    width: 400,\r\n    backgroundColor: theme.palette.background.paper,\r\n    border: \"2px solid #000\",\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 4, 3),\r\n  },\r\n  callEnd: {\r\n    backgroundColor: \"#eb0905\",\r\n    color: \"#fff\",\r\n    marginLeft: \"50px\",\r\n  },\r\n  callAnswer: {\r\n    backgroundColor: \"#237301\",\r\n    color: \"#fff\",\r\n    float: \"right\",\r\n    marginRight: \"50px\",\r\n  },\r\n  callImg: {\r\n    justifyContent: \"center\",\r\n    textAlign: \"center\",\r\n    backgroundColor: \"#29367f\",\r\n    width: \"100px\",\r\n    height: \"100px\",\r\n    borderRadius: \"50px\",\r\n    margin: \"0 auto\",\r\n    color: \"#ffffff\",\r\n  },\r\n  callText: { position: \"relative\", top: \"30%\", fontSize: \"xx-large\" },\r\n  callName: {\r\n    textAlign: \"center\",\r\n  },\r\n}));\r\n\r\nexport default function CallModal({ callId, playing, toggle }) {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const [modalStyle] = useState(getModalStyle);\r\n  const [open, setOpen] = useState(true);\r\n  const [user, setUser] = useState();\r\n  const [userId, setUserId] = React.useState(0);\r\n\r\n  debugger;\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n  };\r\n  useEffect(() => {\r\n    if (callId && callId.status) getUserById(callId.status, setUser);\r\n    return () => {};\r\n  }, [callId]);\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  function callEnd() {\r\n    setOpen(false);\r\n    toggle();\r\n  }\r\n  function answer() {\r\n    setOpen(false);\r\n    toggle();\r\n    history.push(\"/app/call/\" + callId.status);\r\n  }\r\n\r\n  const body = (\r\n    <div style={modalStyle} className={classes.paper}>\r\n      <div className={classes.callImg}>\r\n        <span className={classes.callText}>\r\n          {\" \"}\r\n          {user\r\n            ? user.firstName.slice(0, 1).toUpperCase() +\r\n              user.lastName.slice(0, 1).toUpperCase()\r\n            : \"\"}\r\n        </span>\r\n      </div>\r\n      <div className={classes.callName}>\r\n        <h2 id=\"simple-modal-title\">\r\n          {user ? user.firstName + \" \" + user.lastName : \"\"}\r\n        </h2>\r\n        <p>Is calling...</p>\r\n      </div>\r\n      <IconButton\r\n        edge=\"end\"\r\n        aria-label=\"end\"\r\n        className={classes.callEnd}\r\n        onClick={() => callEnd()}\r\n      >\r\n        <CallEndIcon />\r\n      </IconButton>\r\n      <IconButton\r\n        edge=\"end\"\r\n        aria-label=\"answer\"\r\n        className={classes.callAnswer}\r\n        onClick={() => answer()}\r\n      >\r\n        <CallIcon />\r\n      </IconButton>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <button type=\"button\" onClick={handleOpen}>\r\n        Open Modal\r\n      </button>\r\n      <Modal\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"simple-modal-title\"\r\n        aria-describedby=\"simple-modal-description\"\r\n      >\r\n        {body}\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import { makeStyles } from \"@material-ui/styles\";\r\n\r\nexport default makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    maxWidth: \"100vw\",\r\n    overflowX: \"hidden\",\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n    width: `calc(100vw - 240px)`,\r\n    minHeight: \"100vh\",\r\n  },\r\n  contentShift: {\r\n    width: `calc(100vw - ${240 + theme.spacing(6)}px)`,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  fakeToolbar: {\r\n    ...theme.mixins.toolbar,\r\n  },\r\n}));\r\n","import classnames from \"classnames\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Route, Switch, withRouter } from \"react-router-dom\";\r\nimport io from \"socket.io-client\";\r\n// context\r\nimport { useLayoutState } from \"../../context/LayoutContext\";\r\nimport Calls from \"../../pages/calls/Calls\";\r\nimport DailCall from \"../../pages/calls/DailCall\";\r\nimport ReceiveCall from \"../../pages/calls/ReceiveCall\";\r\nimport Contacts from \"../../pages/contacts/Contacts\";\r\nimport Messages from \"../../pages/messages/Messages\";\r\n// components\r\nimport Header from \"../header/Header\";\r\nimport Sidebar from \"../sidebar/Sidebar\";\r\nimport CallModal from \"./CallModal\";\r\n// styles\r\nimport useStyles from \"./styles\";\r\nconst ENDPOINT = \"http://teachit-api.herokuapp.com\";\r\n\r\nconst useAudio = (url) => {\r\n  const [audio] = useState(new Audio(url));\r\n  const [playing, setPlaying] = useState(false);\r\n\r\n  const toggle = () => setPlaying(!playing);\r\n\r\n  useEffect(() => {\r\n    audio.loop = true;\r\n    playing ? audio.play() : audio.pause();\r\n  }, [playing]);\r\n\r\n  useEffect(() => {\r\n    audio.addEventListener(\"ended\", () => {\r\n      debugger;\r\n      setPlaying(true);\r\n    });\r\n    return () => {\r\n      audio.removeEventListener(\"ended\", () => setPlaying(false));\r\n    };\r\n  }, []);\r\n\r\n  return [playing, toggle];\r\n};\r\n\r\nfunction Layout(props) {\r\n  const [playing, toggle] = useAudio(\"telephone_ring.mp3\");\r\n  const socket = io(ENDPOINT);\r\n  var classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [callId, setCallId] = React.useState();\r\n  const [userId, setUserID] = React.useState(10);\r\n  React.useEffect(() => {\r\n    let user = JSON.parse(localStorage.getItem(\"user\"));\r\n    socket.on(user._id, (toId) => {\r\n      setOpen(true);\r\n      toggle();\r\n      setCallId(toId);\r\n    });\r\n  }, [userId]);\r\n  // global\r\n  var layoutState = useLayoutState();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <>\r\n        <Header history={props.history} />\r\n        <Sidebar />\r\n        <div\r\n          className={classnames(classes.content, {\r\n            [classes.contentShift]: layoutState.isSidebarOpened,\r\n          })}\r\n        >\r\n          <div className={classes.fakeToolbar} />\r\n          <Switch>\r\n            <Route path=\"/app/calls\" component={Calls} />\r\n            <Route path=\"/app/call/:id\" component={ReceiveCall} />\r\n            <Route path=\"/app/call2/:id\" component={DailCall} />\r\n            <Route path=\"/app/messages\" component={Messages} />\r\n            <Route path=\"/app/contacts\" component={Contacts} />\r\n          </Switch>\r\n        </div>\r\n        {open ? (\r\n          <CallModal callId={callId} playing={playing} toggle={toggle} />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(Layout);\r\n","import Avatar from \"@material-ui/core/Avatar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { loginUser, useUserDispatch } from \"../context/UserContext\";\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {\"Copyright  \"}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{\" \"}\r\n      {new Date().getFullYear()}\r\n      {\".\"}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function SignIn() {\r\n  const classes = useStyles();\r\n  var userDispatch = useUserDispatch();\r\n  const history = useHistory();\r\n\r\n  var [isLoading, setIsLoading] = useState(false);\r\n  var [error, setError] = useState(null);\r\n  const [values, setValues] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setValues({ ...values, [name]: value });\r\n  };\r\n\r\n  function login() {\r\n    debugger;\r\n    loginUser(\r\n      userDispatch,\r\n      values.email,\r\n      values.password,\r\n      history,\r\n      setIsLoading,\r\n      setError\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign in\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email Address\"\r\n            name=\"email\"\r\n            onChange={handleInputChange}\r\n            value={values.email}\r\n            autoComplete=\"email\"\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            onChange={handleInputChange}\r\n            value={values.password}\r\n            autoComplete=\"current-password\"\r\n          />\r\n          <FormControlLabel\r\n            control={<Checkbox value=\"remember\" color=\"primary\" />}\r\n            label=\"Remember me\"\r\n          />\r\n          <Button\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n            onClick={login}\r\n          >\r\n            Sign In\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link href=\"#\" variant=\"body2\">\r\n                Forgot password?\r\n              </Link>\r\n            </Grid>\r\n            <Grid item>\r\n              <Link href=\"#/signup\" variant=\"body2\">\r\n                {\"Don't have an account? Sign Up\"}\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import Avatar from \"@material-ui/core/Avatar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useUserDispatch } from \"../context/UserContext\";\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {\"Copyright  \"}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{\" \"}\r\n      {new Date().getFullYear()}\r\n      {\".\"}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function SignUp() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  var userDispatch = useUserDispatch();\r\n  const [values, setValues] = useState({\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setValues({ ...values, [name]: value });\r\n  };\r\n\r\n  function save(event) {\r\n    debugger;\r\n    event.preventDefault();\r\n    fetch(\"https://teachit-api.herokuapp.com/teachit/api/v1/user\", {\r\n      method: \"post\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(values),\r\n    })\r\n      .then((Response) => Response.json())\r\n      .then((response) => {\r\n        if (response.user) history.push(\"/app\");\r\n        else alert(\"Sorrrrrry !!!! Un-authenticated User !!!!!\");\r\n      });\r\n  }\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign up\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                autoComplete=\"fname\"\r\n                name=\"firstName\"\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"firstName\"\r\n                label=\"First Name\"\r\n                onChange={handleInputChange}\r\n                value={values.firstName}\r\n                autoFocus\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"lastName\"\r\n                label=\"Last Name\"\r\n                name=\"lastName\"\r\n                onChange={handleInputChange}\r\n                value={values.lastName}\r\n                autoComplete=\"lname\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Email Address\"\r\n                name=\"email\"\r\n                onChange={handleInputChange}\r\n                value={values.email}\r\n                autoComplete=\"email\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                onChange={handleInputChange}\r\n                value={values.password}\r\n                autoComplete=\"current-password\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControlLabel\r\n                control={<Checkbox value=\"allowExtraEmails\" color=\"primary\" />}\r\n                label=\"I want to receive inspiration, marketing promotions and updates via email.\"\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n            onClick={save}\r\n          >\r\n            Sign Up\r\n          </Button>\r\n          <Grid container justify=\"flex-end\">\r\n            <Grid item>\r\n              <Link href=\"#/login\" variant=\"body2\">\r\n                Already have an account? Sign in\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={5}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { BrowserRouter, Redirect, Route, Switch } from \"react-router-dom\";\r\nimport { useUserState } from \"../context/UserContext\";\r\nimport Calls from \"../pages/calls/Calls\";\r\nimport DailCall from \"../pages/calls/DailCall\";\r\nimport ReceiveCall from \"../pages/calls/ReceiveCall\";\r\nimport Contacts from \"../pages/contacts/Contacts\";\r\nimport Messages from \"../pages/messages/Messages\";\r\n// components\r\nimport Layout from \"./layout/Layout\";\r\n// pages\r\nimport Login from \"./Login\";\r\nimport SignUp from \"./Signup\";\r\n\r\nexport default function App() {\r\n  // global\r\n  var { isAuthenticated } = useUserState();\r\n  // var isAuthenticated = false;\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <Switch>\r\n        <Route exact path=\"/\" render={() => <Redirect to=\"/app/contacts\" />} />\r\n        <Route\r\n          exact\r\n          path=\"/app\"\r\n          render={() => <Redirect to=\"/app/contacts\" />}\r\n        />\r\n        <PrivateRoute path=\"/app\" component={Layout} />\r\n        <PrivateRoute path=\"/app/calls\" component={Calls} />\r\n        <PrivateRoute path=\"/app/call/:id\" component={ReceiveCall} />\r\n        <PrivateRoute path=\"/app/call2/:id\" component={DailCall} />\r\n        <PrivateRoute path=\"/app/messages\" component={Messages} />\r\n        <PrivateRoute path=\"/app/contacts\" component={Contacts} />\r\n        <PublicRoute path=\"/login\" component={Login} />\r\n        <PublicRoute path=\"/signup\" component={SignUp} />\r\n        <Route component={Error} />\r\n      </Switch>\r\n    </BrowserRouter>\r\n  );\r\n\r\n  function PrivateRoute({ component, ...rest }) {\r\n    return (\r\n      <Route\r\n        {...rest}\r\n        render={(props) =>\r\n          isAuthenticated ? (\r\n            React.createElement(component, props)\r\n          ) : (\r\n            <Redirect\r\n              to={{\r\n                pathname: \"/login\",\r\n                state: {\r\n                  from: props.location,\r\n                },\r\n              }}\r\n            />\r\n          )\r\n        }\r\n      />\r\n    );\r\n  }\r\n\r\n  function PublicRoute({ component, ...rest }) {\r\n    return (\r\n      <Route\r\n        {...rest}\r\n        render={(props) =>\r\n          isAuthenticated ? (\r\n            <Redirect\r\n              to={{\r\n                pathname: \"/\",\r\n              }}\r\n            />\r\n          ) : (\r\n            React.createElement(component, props)\r\n          )\r\n        }\r\n      />\r\n    );\r\n  }\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import tinycolor from \"tinycolor2\";\r\n\r\nconst primary = \"#536DFE\";\r\nconst secondary = \"#FF5C93\";\r\nconst warning = \"#FFC260\";\r\nconst success = \"#3CD4A0\";\r\nconst info = \"#9013FE\";\r\n\r\nconst lightenRate = 7.5;\r\nconst darkenRate = 15;\r\n\r\nexport default {\r\n  palette: {\r\n    primary: {\r\n      main: primary,\r\n      light: tinycolor(primary).lighten(lightenRate).toHexString(),\r\n      dark: tinycolor(primary).darken(darkenRate).toHexString(),\r\n    },\r\n    secondary: {\r\n      main: secondary,\r\n      light: tinycolor(secondary).lighten(lightenRate).toHexString(),\r\n      dark: tinycolor(secondary).darken(darkenRate).toHexString(),\r\n      contrastText: \"#FFFFFF\",\r\n    },\r\n    warning: {\r\n      main: warning,\r\n      light: tinycolor(warning).lighten(lightenRate).toHexString(),\r\n      dark: tinycolor(warning).darken(darkenRate).toHexString(),\r\n    },\r\n    success: {\r\n      main: success,\r\n      light: tinycolor(success).lighten(lightenRate).toHexString(),\r\n      dark: tinycolor(success).darken(darkenRate).toHexString(),\r\n    },\r\n    info: {\r\n      main: info,\r\n      light: tinycolor(info).lighten(lightenRate).toHexString(),\r\n      dark: tinycolor(info).darken(darkenRate).toHexString(),\r\n    },\r\n    text: {\r\n      primary: \"#4A4A4A\",\r\n      secondary: \"#6E6E6E\",\r\n      hint: \"#B9B9B9\",\r\n    },\r\n    background: {\r\n      default: \"#F6F7FF\",\r\n      light: \"#F3F5FF\",\r\n    },\r\n  },\r\n  customShadows: {\r\n    widget:\r\n      \"0px 3px 11px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A\",\r\n    widgetDark:\r\n      \"0px 3px 18px 0px #4558A3B3, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A\",\r\n    widgetWide:\r\n      \"0px 12px 33px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A\",\r\n  },\r\n  overrides: {\r\n    MuiBackdrop: {\r\n      root: {\r\n        backgroundColor: \"#4A4A4A1A\",\r\n      },\r\n    },\r\n    MuiMenu: {\r\n      paper: {\r\n        boxShadow:\r\n          \"0px 3px 11px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A\",\r\n      },\r\n    },\r\n    MuiSelect: {\r\n      icon: {\r\n        color: \"#B9B9B9\",\r\n      },\r\n    },\r\n    MuiListItem: {\r\n      root: {\r\n        \"&$selected\": {\r\n          backgroundColor: \"#F3F5FF !important\",\r\n          \"&:focus\": {\r\n            backgroundColor: \"#F3F5FF\",\r\n          },\r\n        },\r\n      },\r\n      button: {\r\n        \"&:hover, &:focus\": {\r\n          backgroundColor: \"#F3F5FF\",\r\n        },\r\n      },\r\n    },\r\n    MuiTouchRipple: {\r\n      child: {\r\n        backgroundColor: \"white\",\r\n      },\r\n    },\r\n    MuiTableRow: {\r\n      root: {\r\n        height: 56,\r\n      },\r\n    },\r\n    MuiTableCell: {\r\n      root: {\r\n        borderBottom: \"1px solid rgba(224, 224, 224, .5)\",\r\n      },\r\n      head: {\r\n        fontSize: \"0.95rem\",\r\n      },\r\n      body: {\r\n        fontSize: \"0.95rem\",\r\n      },\r\n    },\r\n  },\r\n};\r\n","import { createMuiTheme } from \"@material-ui/core\";\r\nimport defaultTheme from \"./default\";\r\n\r\nconst overrides = {\r\n  typography: {\r\n    h1: {\r\n      fontSize: \"3rem\",\r\n    },\r\n    h2: {\r\n      fontSize: \"2rem\",\r\n    },\r\n    h3: {\r\n      fontSize: \"1.64rem\",\r\n    },\r\n    h4: {\r\n      fontSize: \"1.5rem\",\r\n    },\r\n    h5: {\r\n      fontSize: \"1.285rem\",\r\n    },\r\n    h6: {\r\n      fontSize: \"1.142rem\",\r\n    },\r\n  },\r\n};\r\n\r\nexport default {\r\n  default: createMuiTheme({ ...defaultTheme, ...overrides }),\r\n};\r\n","import { CssBaseline } from \"@material-ui/core\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport { LayoutProvider } from \"./context/LayoutContext\";\nimport { UserProvider } from \"./context/UserContext\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport Themes from \"./themes\";\n\nReactDOM.render(\n  <LayoutProvider>\n    <UserProvider>\n      <ThemeProvider theme={Themes.default}>\n        <CssBaseline />\n        <App />\n      </ThemeProvider>\n    </UserProvider>\n  </LayoutProvider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}